/**
* lufylegend
* @version 1.9.10
* @Explain lufylegend是一个HTML5开源引擎，利用它可以快速方便的进行HTML5的开发
* @author lufy(lufy_legend)
* @blog http://blog.csdn.net/lufy_Legend
* @email lufy.legend@gmail.com
* @homepage http://lufylegend.com/lufylegend
* @github https://github.com/lufylegend/lufylegend.js
*/
function LEvent(a){this.eventType=a,this._ll_preventDefault=!1}function LStageAlign(){throw"LStageAlign cannot be instantiated"}function LStageScaleMode(){throw"LStageScaleMode cannot be instantiated"}function trace(){if(LGlobal.traceDebug){var b,a=document.getElementById("traceObject");for(trace.arguments.length>0&&null==a&&(a=document.createElement("TEXTAREA"),a.id="traceObject",a.style.position="absolute",a.style.top=LGlobal.height+20+"px",a.style.width=LGlobal.width+"px",a.style.height="200px",document.body.appendChild(a)),b=0;b<trace.arguments.length;b++)a.value=a.value+trace.arguments[b]+"\r\n",a.scrollTop=a.scrollHeight}}function addChild(a){LGlobal.stage.addChild(a)}function removeChild(a){LGlobal.stage.removeChild(a)}function init(a,b,c,d,e,f){var g,h;LGlobal.speed=a,g=function(){LGlobal.canTouch&&LGlobal.aspectRatio==LANDSCAPE&&window.innerWidth<window.innerHeight?LGlobal.horizontalError():LGlobal.canTouch&&LGlobal.aspectRatio==PORTRAIT&&window.innerWidth>window.innerHeight?LGlobal.verticalError():setTimeout(e,100),LGlobal.startTimer=(new Date).getTime()},"function"==typeof a?(LGlobal.setCanvas(b,c,d),g(),h=function(){a(h),LGlobal.onShow()}):h=function(){LGlobal.frameRate=setInterval(function(){LGlobal.onShow()},a),LGlobal.setCanvas(b,c,d),g()},null!=f&&f==LEvent.INIT?h():LEvent.addEventListener(window,"load",function(){h()})}function base(a,b,c){var d=null,e=a.constructor.prototype,f={};"Object"==a.constructor.name&&console.warn("When you use the extends. You must make a method like 'XX.prototype.xxx=function(){}'. but not 'XX.prototype={xxx:function(){}}'."),typeof a.__ll__parent__==UNDEFINED&&(a.__ll__parent__=[],a.__ll__parent__=[]),a.__ll__parent__.push(b.prototype);for(d in e)f[d]=1;for(d in b.prototype)f[d]||(e[d]=b.prototype[d]);e.toString==Object.prototype.toString&&(e.toString=LObject.prototype.toString),b.apply(a,c)}function getTimer(){return(new Date).getTime()-LGlobal.startTimer}function getExtension(a){var b,c=/([^#?]+\.)([^.#?]+)/;return b=a.match(c),b.length>=3?b[2].toLowerCase():null}function LBlendMode(){throw"LBlendMode cannot be instantiated"}function LoadingSample2(a,b,c){base(this,LSprite,[]);var g,d=this,e=LGlobal.canvas,f="Loading...";d.backgroundColor=null==b?"#000000":b,d.graphics.drawRect(1,d.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,d.backgroundColor),null==c&&(c=LGlobal._create_loading_color()),d.color=c,d.progress=0,d.size=null==a?.2*LGlobal.height:a,g=new LTextField,g.text=f,g.size=d.size,g.color="#ffffff",g.x=(LGlobal.width-g.getWidth())/2,g.y=(LGlobal.height-d.size)/2,d.addChild(g),d.backLabel=g,g=new LTextField,g.text="***%",g.size=.3*d.size,g.color=c,g.x=(LGlobal.width-g.getWidth())/2,g.y=(LGlobal.height-d.size)/2-.4*d.size,d.addChild(g),d.progressLabel=g,g=new LTextField,g.text=f,g.size=d.size,g.color=d.color,g.x=(LGlobal.width-g.getWidth())/2,g.y=(LGlobal.height-d.size)/2,g.mask=new LGraphics,d.screenX=g.x,d.screenY=g.y,d.screenWidth=g.getWidth(),d.addChild(g),d.showLabel=g,e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowColor="blue",d.setProgress(d.progress)}function LoadingSample3(a,b,c){base(this,LSprite,[]);var d=this;LGlobal.canvas,d.backgroundColor=null==b?"#000000":b,d.graphics.drawRect(1,d.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,d.backgroundColor),null==c&&(c=LGlobal._create_loading_color()),d.color=c,d.progress=0,d.screenWidth=.75*LGlobal.width,d.screenHeight=null==a?.1*LGlobal.height:a,d.screenHeight>5&&(d.screenHeight=5),d.screenX=(LGlobal.width-d.screenWidth)/2,d.screenY=(LGlobal.height-d.screenHeight)/2,d.back=new LSprite,d.addChild(d.back),d.label=new LTextField,d.label.color="#ffffff",d.label.weight="bolder",d.label.size=2*d.screenHeight,d.label.x=d.screenX+.5*(d.screenWidth-d.label.getWidth()),d.label.y=d.screenY-4*d.screenHeight,d.addChild(d.label),d.star=new Array,d.addEventListener(LEvent.ENTER_FRAME,d.onframe),d.setProgress(d.progress)}function LoadingSample4(a,b,c){var d,f,g;for(base(this,LSprite,[]),d=this,LGlobal.canvas,d.backgroundColor=null==b?"#000000":b,d.graphics.drawRect(1,d.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,d.backgroundColor),null==c&&(c="#FFFFFF"),d.arc=new LSprite,d.arc.x=.5*LGlobal.width,d.arc.y=.5*LGlobal.height,d.addChild(d.arc),f=0;360>f;f++)d.arc.graphics.drawArc(1+f/36,c,[0,0,50,2*Math.PI/360*f,2*Math.PI/360*(f+2)]);d.progress=0,d.label=new LTextField,d.label.color=c,d.label.weight="bolder",d.label.size=18,d.label.x=.5*LGlobal.width,d.label.y=.5*LGlobal.height-.5*d.label.getHeight(),d.addChild(d.label),g=new LDropShadowFilter(0,0,"#FFFFFF",30),d.arc.filters=[g],d.addEventListener(LEvent.ENTER_FRAME,d.onframe),d.setProgress(d.progress)}function LoadingSample5(a,b,c){var d,f,g,h,i;for(base(this,LSprite,[]),d=this,LGlobal.canvas,d.backgroundColor=null==b?"#000000":b,d.graphics.drawRect(1,d.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,d.backgroundColor),null==c&&(c="#FFFFFF"),d.arc=new LSprite,d.arc.x=.5*LGlobal.width,d.arc.y=.5*LGlobal.height,d.addChild(d.arc),f=50,g=0;360>g;g+=30)h=new LSprite,h.graphics.drawArc(0,c,[f,0,7,0,2*Math.PI],!0,c),h.rotate=g,h.alpha=.1+g/360,d.arc.addChild(h);d.index=0,d.max=3,d.progress=0,d.label=new LTextField,d.label.color="#FFFFFF",d.label.weight="bolder",d.label.size=18,d.label.x=.5*LGlobal.width,d.label.y=.5*LGlobal.height-.5*d.label.getHeight(),d.addChild(d.label),i=new LDropShadowFilter(0,0,"#FFFFFF",30),d.arc.filters=[i],d.addEventListener(LEvent.ENTER_FRAME,d.onframe),d.setProgress(d.progress)}function LoadingSample6(a,b,c){var d=this;base(d,LSprite,[]),d.progress=0,d.step=0,d.holeR=a||10,d.holeAmount=5,d.holesx=20,d.loadingBarWidth=2*d.holeR*d.holeAmount+d.holesx*(d.holeAmount-1),d.loadingBarHeight=2*d.holeR,d.progressColor=b||"#2187e7",d.filterColor=c||"#00c6ff",d.backLayer=new LSprite,d.backLayer.graphics.drawRect(0,"",[0,0,LGlobal.width,LGlobal.height],!0,"#161616"),d.addChild(d.backLayer),d.holeLayer=new LSprite,d.holeLayer.x=.5*(LGlobal.width-d.loadingBarWidth),d.holeLayer.y=.5*(LGlobal.height-d.loadingBarHeight),d.addChild(d.holeLayer),d.progressLayer=new LSprite,d.progressLayer.x=.5*(LGlobal.width-d.loadingBarWidth),d.progressLayer.y=.5*(LGlobal.height-d.loadingBarHeight),d.addChild(d.progressLayer),d._addHole()}function LoadingSample7(a,b,c){var d=this;base(d,LSprite,[]),d.progress=0,d.step=0,d.holeW=a||10,d.holeH=b||30,d.holeAmount=10,d.holesx=8,d.loadingBarWidth=d.holeW*d.holeAmount+d.holesx*(d.holeAmount-1),d.loadingBarHeight=d.holeH,d.progressColor=c||"#2187e7",d.backLayer=new LSprite,d.backLayer.graphics.drawRect(0,"",[0,0,LGlobal.width,LGlobal.height],!0,"#161616"),d.addChild(d.backLayer),d.holeLayer=new LSprite,d.holeLayer.x=.5*(LGlobal.width-d.loadingBarWidth),d.holeLayer.y=.5*(LGlobal.height-d.loadingBarHeight),d.addChild(d.holeLayer),d.progressLayer=new LSprite,d.progressLayer.x=.5*(LGlobal.width-d.loadingBarWidth),d.progressLayer.y=.5*(LGlobal.height-d.loadingBarHeight),d.addChild(d.progressLayer),d._addHole()}var mouseX,mouseY,LMouseEvent,LMultitouchInputMode,LMultitouch,LTextEvent,LFocusEvent,LMouseEventContainer,LKeyboardEvent,LAccelerometerEvent,LGlobal,LSystem,LStage,LInit,LExtends,LObject,LColorTransform,LTransform,LMatrix,LVec2,LEventDispatcher,LDisplayObject,LInteractiveObject,LDisplayObjectContainer,LLoader,LURLLoader,LWebAudio,LMedia,LSound,LVideo,LPoint,LRectangle,LGraphics,LShape,LSprite,LButton,LTextFieldType,LTextField,LBitmap,LBitmapData,LDropShadowFilter,LAnimation,LAnimationTimeline,LLoadManage,LEasing,Quad,Cubic,Quart,Quint,Sine,Strong,Expo,Circ,Elastic,Back,Bounce,LTweenLiteTimeline,LTweenLite,LAjax,LStageWebView,FPS,LQuadTree,LoadingSample1,LBox2d,LTransition,LIris,LTransitionManager,LFlash,LString,OS_PC="pc",OS_IPHONE="iPhone",OS_IPOD="iPod",OS_IPAD="iPad",OS_ANDROID="Android",OS_WINDOWS_PHONE="Windows Phone",OS_BLACK_BERRY="BlackBerry",NONE="none",UNDEFINED="undefined",LANDSCAPE="landscape",PORTRAIT="portrait";LEvent.prototype.preventDefault=function(){this._ll_preventDefault=!0},LEvent.INIT="init",LEvent.COMPLETE="complete",LEvent.ENTER_FRAME="enter_frame",LEvent.WINDOW_RESIZE="resize",LEvent.SOUND_COMPLETE="sound_complete",LEvent.END_CONTACT="endContact",LEvent.PRE_SOLVE="preSolve",LEvent.POST_SOLVE="postSolve",LEvent.BEGIN_CONTACT="beginContact",LEvent.addEventListener=function(a,b,c,d){null==d&&(d=!1),a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c]()},a.attachEvent("on"+b,a[b+c]))},LEvent.removeEventListener=function(a,b,c,d){null==d&&(d=!1),a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c]()},a.detachEvent("on"+b,a[b+c]))},LMouseEvent=function(){throw"LMouseEvent cannot be instantiated"},LMouseEvent.MOUSE_DOWN="mousedown",LMouseEvent.MOUSE_UP="mouseup",LMouseEvent.TOUCH_START="touchstart",LMouseEvent.TOUCH_MOVE="touchmove",LMouseEvent.TOUCH_END="touchend",LMouseEvent.MOUSE_MOVE="mousemove",LMouseEvent.MOUSE_OVER="mouseover",LMouseEvent.MOUSE_OUT="mouseout",LMouseEvent.DOUBLE_CLICK="dblclick",LMultitouchInputMode=function(){throw"LMultitouchInputMode cannot be instantiated"},LMultitouchInputMode.NONE="none",LMultitouchInputMode.GESTURE="gesture",LMultitouchInputMode.TOUCH_POINT="touchPoint",LMultitouch=function(){throw"LMultitouch cannot be instantiated"},LMultitouch.inputMode="none",LMultitouch.touchs=[],LTextEvent=function(){throw"LTextEvent cannot be instantiated"},LTextEvent.TEXT_INPUT="textInput",LTextEvent.WIND_COMPLETE="windComplete",LFocusEvent=function(){throw"LFocusEvent cannot be instantiated"},LFocusEvent.FOCUS_IN="focusIn",LFocusEvent.FOCUS_OUT="focusOut",LMouseEventContainer=function(){function a(){var a=this;a.container={},a.dispatchAllEvent=!1,a.mouseDownContainer=[],a.mouseUpContainer=[],a.mouseMoveContainer=[],a.mouseOverContainer=[],a.mouseOutContainer=[],a.mouseDblContainer=[],a.textFieldInputContainer=[],a.buttonContainer=[]}return a.prototype={pushInputBox:function(a){var d,e,b=this,c=b.textFieldInputContainer;for(d=0,e=c.length;e>d;d++)if(a.objectIndex==c[d].objectIndex)return;b.textFieldInputContainer.push(a)},removeInputBox:function(a){var d,e,b=this,c=b.textFieldInputContainer;for(d=0,e=c.length;e>d;d++)if(a.objectIndex==c[d].objectIndex){b.textFieldInputContainer.splice(d,1);break}},pushButton:function(a){var d,e,b=this,c=b.buttonContainer;for(d=0,e=c.length;e>d;d++)if(a.objectIndex==c[d].objectIndex)return;b.buttonContainer.push(a)},removeButton:function(a){var d,e,b=this,c=b.buttonContainer;for(d=0,e=c.length;e>d;d++)if(a.objectIndex==c[d].objectIndex){b.buttonContainer.splice(d,1);break}},dispatchEventButton:function(a){var d,e,b=this,c=b.buttonContainer;for(d=0,e=c.length;e>d;d++)"function"==typeof b.buttonContainer[d].ll_button_mode&&b.buttonContainer[d].ll_button_mode(a)},addEvent:function(a,b,c){b.push({container:a,listener:c})},removeEvent:function(a,b,c){var e,f;for(e=0,f=b.length;f>e;e++)if(b[e].container.objectIndex===a.objectIndex&&(!c||b[e].listener==c)){b.splice(e,1);break}},addMouseDownEvent:function(a,b){var c=this;c.addEvent(a,c.mouseDownContainer,b)},addMouseUpEvent:function(a,b){var c=this;c.addEvent(a,c.mouseUpContainer,b)},addMouseMoveEvent:function(a,b){var c=this;c.addEvent(a,c.mouseMoveContainer,b)},addMouseOverEvent:function(a,b){var c=this;c.addEvent(a,c.mouseOverContainer,b)},addMouseOutEvent:function(a,b){var c=this;c.addEvent(a,c.mouseOutContainer,b)},addMouseDblEvent:function(a,b){var c=this;c.addEvent(a,c.mouseDblContainer,b)},addMouseEvent:function(a,b,c){var d=this;b==LMouseEvent.MOUSE_DOWN?d.addMouseDownEvent(a,c):b==LMouseEvent.MOUSE_UP?d.addMouseUpEvent(a,c):b==LMouseEvent.MOUSE_OVER?d.addMouseOverEvent(a,c):b==LMouseEvent.MOUSE_OUT?d.addMouseOutEvent(a,c):b==LMouseEvent.MOUSE_MOVE?d.addMouseMoveEvent(a,c):d.addMouseDblEvent(a,c)},hasEventListener:function(a,b,c){var e,f,g,d=this;for(e=b==LMouseEvent.MOUSE_DOWN?d.mouseDownContainer:b==LMouseEvent.MOUSE_UP?d.mouseUpContainer:b==LMouseEvent.MOUSE_OVER?d.mouseOverContainer:b==LMouseEvent.MOUSE_OUT?d.mouseOutContainer:b==LMouseEvent.MOUSE_MOVE?d.mouseMoveContainer:d.mouseDblContainer,f=0,g=e.length;g>f;f++)if(e[f].container.objectIndex===a.objectIndex&&(!c||e[f].listener==c))return!0;return!1},removeMouseDownEvent:function(a,b){var c=this;c.removeEvent(a,c.mouseDownContainer,b)},removeMouseUpEvent:function(a,b){var c=this;c.removeEvent(a,c.mouseUpContainer,b)},removeMouseMoveEvent:function(a,b){var c=this;c.removeEvent(a,c.mouseMoveContainer,b)},removeMouseOverEvent:function(a,b){var c=this;c.removeEvent(a,c.mouseOverContainer,b)},removeMouseOutEvent:function(a,b){var c=this;c.removeEvent(a,c.mouseOutContainer,b)},removeMouseDblEvent:function(a,b){var c=this;c.removeEvent(a,c.mouseDblContainer,b)},removeMouseEvent:function(a,b,c){var d=this;b==LMouseEvent.MOUSE_DOWN?d.removeMouseDownEvent(a,c):b==LMouseEvent.MOUSE_UP?d.removeMouseUpEvent(a,c):b==LMouseEvent.MOUSE_OVER?d.removeMouseOverEvent(a,c):b==LMouseEvent.MOUSE_OUT?d.removeMouseOutEvent(a,c):b==LMouseEvent.MOUSE_MOVE?d.removeMouseMoveEvent(a,c):d.removeMouseDblEvent(a,c)},dispatchMouseEvent:function(a,b){var c=this;b==LMouseEvent.MOUSE_DOWN?(c.dispatchEvent(a,c.mouseDownContainer,LMouseEvent.MOUSE_DOWN),c.dispatchEvent(a,c.textFieldInputContainer)):b==LMouseEvent.MOUSE_UP?c.dispatchEvent(a,c.mouseUpContainer,LMouseEvent.MOUSE_UP):b==LMouseEvent.DOUBLE_CLICK?c.dispatchEvent(a,c.mouseDblContainer,LMouseEvent.DOUBLE_CLICK):(c.dispatchEventButton(a),c.dispatchEvent(a,c.mouseOutContainer,LMouseEvent.MOUSE_OUT),c.dispatchEvent(a,c.mouseOverContainer,LMouseEvent.MOUSE_OVER),c.dispatchEvent(a,c.mouseMoveContainer,LMouseEvent.MOUSE_MOVE))},getRootParams:function(a){for(var b=a.parent,c={x:0,y:0,scaleX:1,scaleY:1};b&&"root"!=b;)c.x*=b.scaleX,c.y*=b.scaleY,c.x+=b.x,c.y+=b.y,c.scaleX*=b.scaleX,c.scaleY*=b.scaleY,b=b.parent;return c},_mouseEnabled:function(a){if(!a||!a.parent)return!1;if(!a.visible||typeof a.mouseEnabled!=UNDEFINED&&!a.mouseEnabled)return!1;for(var c=a.parent;c&&"root"!=c;){if(!c.mouseEnabled||!c.mouseChildren||!c.visible)return!1;if(c=c.parent,!c)return!1}return!0},_dispatchEvent:function(a,b,c,d,e,f){var h,j=c.length;for(h=e;f>=h&&j>h;h++)o=c[h],o.sp.objectIndex==d&&(a.currentTarget=a.clickTarget=o.sp,a.target||(a.target=o.sp),a.event_type=b,a.selfX=(a.offsetX-o.co.x-o.sp.x)/(o.co.scaleX*o.sp.scaleX),a.selfY=(a.offsetY-o.co.y-o.sp.y)/(o.co.scaleY*o.sp.scaleY),o.listener(a,o.sp))},dispatchEvent:function(a,b,c){var e,f,h,i,j,k,d=this,g=[];for(i=0,j=b.length;j>i;i++)if(e=b[i].container||b[i],d._mouseEnabled(e))if(f=d.getRootParams(e),c||!e.mouseEvent)if(e.ismouseon(a,f)){if(c==LMouseEvent.MOUSE_OUT)continue;if(c==LMouseEvent.MOUSE_OVER&&e.ll_mousein)continue;c!=LMouseEvent.MOUSE_UP&&(e.ll_mousein=!0),g.push({sp:e,co:f,listener:b[i].listener})}else{if(c!=LMouseEvent.MOUSE_OUT&&c!=LMouseEvent.MOUSE_OVER)continue;if(!e.ll_mousein)continue;e.ll_mousein=!1,g.push({sp:e,co:f,listener:b[i].listener})}else e.mouseEvent(a,LMouseEvent.MOUSE_DOWN,f);if(0!=g.length)for(g.length>1&&(g=g.sort(d._sort.bind(d))),j=g.length,i=0;j>i;i++)if(h=g[i],d._dispatchEvent(a,c,g,h.sp.objectIndex,i,d.dispatchAllEvent?j-1:i),i<g.length-1&&h.sp.objectIndex==g[i+1].sp.objectIndex)g.splice(i,1),i--;else{for(;;){if(k||(k=h.sp.parent,a.target=h.sp),!k||"root"==k)break;if(d._dispatchEvent(a,c,g,k.objectIndex,i+1,j),a.target=k,k=k.parent,!k||"root"==k)break}if(!d.dispatchAllEvent)break}},set:function(a,b){this.container[a]=b},_sort:function(a,b){var d,e,h,i,j,c=this,f=c._getSort(a.sp),g=c._getSort(b.sp);for(h=0,i=f.length,j=g.length;i>h&&j>h;h++)if(d=f[h],e=g[h],d.objectIndex!=e.objectIndex)return e.parent.getChildIndex(e)-d.parent.getChildIndex(d);return g.length-f.length},_getSort:function(a){for(var b=a.parent,c=[a];b&&"root"!=b;)c.unshift(b),b=b.parent;return c}},new a}(),LKeyboardEvent=function(){throw"LKeyboardEvent cannot be instantiated"},LKeyboardEvent.KEY_DOWN="keydown",LKeyboardEvent.KEY_UP="keyup",LKeyboardEvent.KEY_PRESS="keypress",LAccelerometerEvent=function(){throw"LAccelerometerEvent cannot be instantiated"},LAccelerometerEvent.DEVICEMOTION="devicemotion",LStageAlign.TOP="T",LStageAlign.BOTTOM="B",LStageAlign.LEFT="L",LStageAlign.RIGHT="Re",LStageAlign.TOP_LEFT="TL",LStageAlign.TOP_RIGHT="TR",LStageAlign.TOP_MIDDLE="TM",LStageAlign.BOTTOM_LEFT="BL",LStageAlign.BOTTOM_RIGHT="BR",LStageAlign.BOTTOM_MIDDLE="BM",LStageAlign.MIDDLE="M",LStageScaleMode.EXACT_FIT="exactFit",LStageScaleMode.SHOW_ALL="showAll",LStageScaleMode.NO_BORDER="noBorder",LStageScaleMode.NO_SCALE="noScale",LGlobal=function(){function a(){throw"LGlobal cannot be instantiated"}return a.FULL_SCREEN="full_screen",a.traceDebug=!1,a.displayState=NONE,a.aspectRatio=NONE,a.canvasObj=null,a.canvas=null,a.webAudio=!0,a.objectIndex=1,a.stage=null,a.width=0,a.height=0,a.box2d=null,a.speed=50,a.IS_MOUSE_DOWN=!1,a.stopPropagation=!1,a.preventDefault=!0,a.childList=new Array,a.dragList=new Array,a.excludingContainer=new Array,a.fpsStatus=null,a.stageScale="noScale",a.align="M",a.mobile=!1,a.canTouch=!1,a.os=OS_PC,a.ios=!1,a.android=!1,a.android_new=!1,a.backgroundColor=null,a.destroy=!0,a.forceRefresh=!1,a.devicePixelRatio=window.devicePixelRatio||1,a.startTimer=0,a.keepClear=!0,a.top=0,a.left=0,a.window=window,function(b){if(a.isOldFirefox=function(a){var c,b=a.toLowerCase().indexOf("firefox");return 0>b?!1:(c=a.substring(b+8,a.length),parseFloat(c)<39)}(b),b.indexOf(OS_IPHONE)>0)a.os=OS_IPHONE,a.canTouch=!0,a.ios=!0;else if(b.indexOf(OS_IPOD)>0)a.os=OS_IPOD,a.canTouch=!0,a.ios=!0;else if(b.indexOf(OS_IPAD)>0)a.os=OS_IPAD,a.ios=!0,a.canTouch=!0;else if(b.indexOf(OS_ANDROID)>0){a.os=OS_ANDROID,a.canTouch=!0,a.android=!0;var c=b.indexOf(OS_ANDROID);parseInt(b.substr(c+8,1))>3&&(a.android_new=!0)}else b.indexOf(OS_WINDOWS_PHONE)>0?(a.os=OS_WINDOWS_PHONE,a.canTouch=!0):b.indexOf(OS_BLACK_BERRY)>0&&(a.os=OS_BLACK_BERRY,a.canTouch=!0);a.mobile=a.canTouch}(navigator.userAgent),a.setDebug=function(b){a.traceDebug=b},a.setCanvas=function(b,c,d){a.ll_createCanvas(b,c,d),a.ll_createStage(),a.displayState==LStage.FULL_SCREEN?a.resize():"number"==typeof a.displayState&&a.resize(a.width*a.displayState,a.height*a.displayState),a.canTouch?(a.ll_clicks=0,a.ll_prev_clickTime=0,LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_START,a.ll_touchStart),LEvent.addEventListener(document,LMouseEvent.TOUCH_END,a.ll_touchEnd),LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_MOVE,a.ll_touchMove)):(LEvent.addEventListener(a.canvasObj,LMouseEvent.DOUBLE_CLICK,a.ll_mouseDbclick),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_DOWN,a.ll_mouseDown),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_MOVE,a.ll_mouseMove),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_UP,a.ll_mouseUp),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_OUT,a.ll_mouseOut))},a.ll_createCanvas=function(b,c,d){a.id=b,a.object=document.getElementById(b),a.object.innerHTML='<div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform:translateZ(0);z-index:0;"><canvas id="'+a.id+'_canvas" style="margin:0;padding:0;width:'+c+"px;height:"+d+'px;">'+'<div id="noCanvas">'+"<p>Hey there,it looks like you're using Microsoft's Internet Explorer. Microsoft hates the Web and doesn't support HTML5:(</p>"+"</div>"+"</canvas></div>"+'<div id="'+a.id+'_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;">'+'<textarea rows="1" id="'+a.id+'_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea>'+'<input type="text" id="'+a.id+'_InputTextBox"  style="background:transparent;border:0px;"/>'+'<input type="password" id="'+a.id+'_passwordBox"  style="background:transparent;border:0px;"/></div>',a.canvasObj=document.getElementById(a.id+"_canvas"),a._canvas=document.createElement("canvas"),a._context=a._canvas.getContext("2d"),a._context&&(a.canvasObj.innerHTML=""),a.inputBox=document.getElementById(a.id+"_InputText"),a.inputTextareaBoxObj=document.getElementById(a.id+"_InputTextareaBox"),a.inputTextBoxObj=document.getElementById(a.id+"_InputTextBox"),a.passwordBoxObj=document.getElementById(a.id+"_passwordBox"),a.inputTextField=null,c&&(a.canvasObj.width=c),d&&(a.canvasObj.height=d),a.width=a.canvasObj.width,a.height=a.canvasObj.height,a.canvasStyleWidth=a.width,a.canvasStyleHeight=a.height,a.canvas=a.canvasObj.getContext("2d"),a.offsetX=mouseX=0,a.offsetY=mouseY=0},a.ll_createStage=function(){a.stage=new LSprite,a.stage.parent="root",a.childList.push(a.stage),a.stage.baseAddEvent=a.stage.addEventListener,a.stage.baseRemoveEvent=a.stage.removeEventListener,a.stage.addEventListener=function(b,c){b==LEvent.WINDOW_RESIZE?(a.stage.onresizeListener=c,a.stage.onresize=function(b){a.stage.onresizeEvent=b},LEvent.addEventListener(a.window,b,a.stage.onresize)):b==LKeyboardEvent.KEY_DOWN||b==LKeyboardEvent.KEY_UP||b==LKeyboardEvent.KEY_PRESS?LEvent.addEventListener(a.window,b,c):a.stage.baseAddEvent(b,c)},a.stage.removeEventListener=function(b,c){b==LEvent.WINDOW_RESIZE?(LEvent.removeEventListener(a.window,LEvent.WINDOW_RESIZE,a.stage.onresize),delete a.stage.onresize,delete a.stage.onresizeListener):b==LKeyboardEvent.KEY_DOWN||b==LKeyboardEvent.KEY_UP||b==LKeyboardEvent.KEY_PRESS?LEvent.removeEventListener(a.window,b,c):a.stage.baseRemoveEvent(b,c)},a.innerWidth=window.innerWidth,a.innerHeight=window.innerHeight,LEvent.addEventListener(a.window,"blur",function(){a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))})},a.ll_touchStart=function(b){var c,d,e,g,h,i,j;if(a._outStageCheckCount=1,a.IS_MOUSE_DOWN=!0,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN)),a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue(),c=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft),d=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop),LMultitouch.inputMode==LMultitouchInputMode.NONE)e=a.ll_touchStartEvent(b,0,c,d);else if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(g=0,h=b.touches.length;h>g;g++)LMultitouch.touchs["touch"+b.touches[g].identifier]||(e=a.ll_touchStartEvent(b,g,c,d));i=new Date,j=i.getTime(),a.ll_clicks=j<=a.ll_prev_clickTime+500?a.ll_clicks+1:1,a.ll_prev_clickTime=j,2===a.ll_clicks&&(a.mouseEvent(e,LMouseEvent.DOUBLE_CLICK),a.ll_clicks=0),a.mouseJoint_start&&a.mouseJoint_start(e),a.touchHandler(b)},a.ll_touchStartEvent=function(b,c,d,e){var f={offsetX:b.touches[c].pageX-d,offsetY:b.touches[c].pageY-e,touchPointID:b.touches[c].identifier};return f.offsetX=a.ll_scaleX(f.offsetX),f.offsetY=a.ll_scaleY(f.offsetY),mouseX=a.offsetX=f.offsetX,mouseY=a.offsetY=f.offsetY,LMultitouch.touchs["touch"+f.touchPointID]=f,a.mouseEvent(f,LMouseEvent.MOUSE_DOWN),a.buttonStatusEvent=f,f},a.ll_touchEnd=function(b){var c,d,e,f,g,h;if(a.IS_MOUSE_DOWN=!1,LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(e in LMultitouch.touchs){for(c=LMultitouch.touchs[e],h=!1,f=0,g=b.touches.length;g>f;f++)if(b.touches[f].identifier==c.touchPointID){h=!0;break}h||(d=c,delete LMultitouch.touchs[e],a.mouseEvent(d,LMouseEvent.MOUSE_UP))}d||(d={offsetX:a.offsetX,offsetY:a.offsetY}),a.mouseEvent(d,LMouseEvent.MOUSE_UP),a.touchHandler(b),a.buttonStatusEvent=null,a.mouseJoint_end&&a.mouseJoint_end(),a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))},a.ll_touchMove=function(b){var c,d,e,f,g=b.touches.length;for(c=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft),d=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop),LMultitouch.inputMode==LMultitouchInputMode.NONE&&(g=1),i=0,f=b.touches.length;f>i&&g>i;i++)e={offsetX:b.touches[i].pageX-c,offsetY:b.touches[i].pageY-d,touchPointID:b.touches[i].identifier},e.offsetX=a.ll_scaleX(e.offsetX),e.offsetY=a.ll_scaleY(e.offsetY),mouseX=a.offsetX=e.offsetX,mouseY=a.offsetY=e.offsetY,LMultitouch.touchs["touch"+e.touchPointID]&&LMultitouch.touchs["touch"+e.touchPointID].offsetX==e.offsetX&&LMultitouch.touchs["touch"+e.touchPointID].offsetY==e.offsetY||(a.buttonStatusEvent=e,LMultitouch.touchs["touch"+e.touchPointID]=e,a._outStageCheckCount=e.offsetX<=0||e.offsetX>=a.innerWidth||e.offsetX>=a.width||e.offsetY<=0||e.offsetY>=a.innerHeight||e.offsetY>=a.height?0:1,a.mouseEvent(e,LMouseEvent.MOUSE_MOVE));a.touchHandler(b),a.mouseJoint_move&&a.mouseJoint_move(e)},a.ll_mouseDbclick=function(b){null==b.offsetX&&null!=b.layerX&&(b.offsetX=b.layerX,b.offsetY=b.layerY);var c={button:b.button};c.offsetX=a.ll_scaleX(b.offsetX),c.offsetY=a.ll_scaleY(b.offsetY),a.mouseEvent(c,LMouseEvent.DOUBLE_CLICK)},a.ll_mouseDown=function(b){null==b.offsetX&&null!=b.layerX&&(b.offsetX=b.layerX,b.offsetY=b.layerY),a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue();var c={button:b.button};c.offsetX=a.ll_scaleX(b.offsetX),c.offsetY=a.ll_scaleY(b.offsetY),a.mouseEvent(c,LMouseEvent.MOUSE_DOWN),a.IS_MOUSE_DOWN=!0,a.mouseJoint_start&&a.mouseJoint_start(c)},a.ll_mouseMove=function(b){null==b.offsetX&&null!=b.layerX&&(b.offsetX=b.layerX,b.offsetY=b.layerY);var c={};c.offsetX=a.ll_scaleX(b.offsetX),c.offsetY=a.ll_scaleY(b.offsetY),a.buttonStatusEvent=c,mouseX=a.offsetX=c.offsetX,mouseY=a.offsetY=c.offsetY,a.cursor="default",0>=mouseX||mouseX>=a.innerWidth||mouseX>=a.width||0>=mouseY||mouseY>=a.innerHeight||mouseY>=a.height?a._outStageCheckCount&&(a._outStageCheckCount=0,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))):a._outStageCheckCount||(a._outStageCheckCount=1,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN))),a.mouseEvent(c,LMouseEvent.MOUSE_MOVE),document.body.style.cursor=a.cursor,a.mouseJoint_move&&a.mouseJoint_move(c)},a.ll_mouseUp=function(b){null==b.offsetX&&null!=b.layerX&&(b.offsetX=b.layerX,b.offsetY=b.layerY);var c={button:b.button};c.offsetX=a.ll_scaleX(b.offsetX),c.offsetY=a.ll_scaleY(b.offsetY),a.mouseEvent(c,LMouseEvent.MOUSE_UP),a.IS_MOUSE_DOWN=!1,a.mouseJoint_end&&a.mouseJoint_end()},a.ll_mouseOut=function(b){null==b.offsetX&&null!=b.layerX&&(b.offsetX=b.layerX,b.offsetY=b.layerY);var c={};c.offsetX=a.ll_scaleX(b.offsetX),c.offsetY=a.ll_scaleY(b.offsetY),a.mouseEvent(c,LMouseEvent.MOUSE_OUT),a.IS_MOUSE_DOWN=!1},a.touchHandler=function(b){return a.stopPropagation&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation()),a.preventDefault&&b.preventDefault(),b},a.mouseEvent=function(b,c){if(c==LMouseEvent.MOUSE_MOVE&&a.dragHandler(b),LMouseEventContainer.container[c])return LMouseEventContainer.dispatchMouseEvent(b,c),void 0;for(var d=a.childList.length-1;d>=0&&(!a.childList[d].mouseEvent||!a.childList[d].mouseEvent(b,c));d--);},a.dragHandler=function(b){var c,d,e,f=a.dragList;for(c=f.length-1;c>=0;c--)if(d=f[c],!a.canTouch||d.ll_touchPointID==b.touchPointID){e=d.getAbsoluteScale(),d.x=d.ll_dragStartX+(b.offsetX-d.ll_dragMX)*d.scaleX/e.scaleX,d.y=d.ll_dragStartY+(b.offsetY-d.ll_dragMY)*d.scaleY/e.scaleY,d.dragRange&&(d.x<d.dragRange.left?d.x=d.dragRange.left:d.x>d.dragRange.right&&(d.x=d.dragRange.right),d.y<d.dragRange.top?d.y=d.dragRange.top:d.y>d.dragRange.bottom&&(d.y=d.dragRange.bottom));break}},a._ll_mobile=function(){var n,o,p,q,r,b=.3*a.width,c=1.5*b,d=.05*a.width,e=.05*b,f=.15*b,g=.3*b,h=.2*c,i="#cccccc",j="#000000",k="#ffffff",l="#ff0000",m=new LSprite;return addChild(m),b=.3*a.width,c=1.5*b,m.graphics.drawRoundRect(1,j,[d,d,b,c,d],!0,i),m.graphics.drawRoundRect(1,j,[d+e,d+e,b-2*e,c-2*e,d],!0,j),m.graphics.drawRect(1,k,[d+f,d+h,b-2*f,c-2*h],!0,k),m.graphics.drawArc(1,k,[d+.5*b,d+c-3.5*e,1.5*e,0,2*Math.PI]),m.graphics.drawRoundRect(1,k,[d+g,d+f,b-2*g,e,.5*e]),n=new LSprite,n.x=.5*-(b-2*f),n.y=.5*-e,n.graphics.drawRect(1,l,[0,0,b-2*f,e],!0,l),o=new LSprite,o.y=.5*-(b-2*f),o.x=.5*-e,o.graphics.drawRect(1,l,[0,0,e,b-2*f],!0,l),p=new LSprite,p.x=d+g+.5*(b-2*g),p.y=d+h+.5*(c-2*h),p.rotate=45,p.addChild(n),p.addChild(o),m.addChild(p),q=new LSprite,q.graphics.drawVertices(2,j,[[0,0],[f,f],[0,2*f]],!0,i),q.x=1.5*d+c,q.y=1.5*d+.5*c,addChild(q),m.arrow=q,r=function(){setTimeout(function(){location.href=location.href},100)},window.onorientationchange=r,m},a.verticalError=function(){var b=.3*a.width,c=.05*a.width,d=a._ll_mobile(),e=d.clone();e.getChildAt(0).visible=!1,e.x=.5*a.width+c,addChild(e),d.rotate=90,d.x=.5*a.width+c,d.y=.5*b},a.horizontalError=function(){var b=.3*a.width,c=.05*a.width,d=a._ll_mobile(),e=d.clone();e.getChildAt(0).visible=!1,e.rotate=90,e.x=a.width-c,e.y=.5*b,addChild(e),d.arrow.x=1.5*c+b},a.onShow=function(){null!=a.canvas&&(a._outStageCheckCount<=0&&(a._outStageCheckCount--,a._outStageCheckCount<-2&&(a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT)),a._outStageCheckCount=1)),a.fpsStatus&&a.fpsStatus.reset(),a.stage.onresizeEvent&&(a.stage.onresizeListener(a.stage.onresizeEvent),delete a.stage.onresizeEvent),a.forceRefresh&&(a.canvasObj.width=a.canvasObj.width,a.forceRefresh=!1),a.canvas.beginPath(),null!=a.box2d?(a.box2d.ll_show(),!a.traceDebug&&a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+1)):(a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+1),null!==a.backgroundColor&&(a.canvas.fillStyle=a.backgroundColor,a.canvas.fillRect(0,0,a.width,a.height))),a.show(a.childList))},a.show=function(a){for(var d,b=0,c=a.length;c>b;b++)d=a[b],d&&d.ll_show&&(d.ll_show(),d._ll_removeFromSelf&&(b--,c--))},a.divideCoordinate=function(a,b,c,d){var e,f,j,g=a/d,h=b/c,i=[];for(e=0;c>e;e++){for(j=[],f=0;d>f;f++)j.push({x:g*f,y:h*e,width:g,height:h});i.push(j)}return i},a._create_loading_color=function(){var b=a.canvas.createRadialGradient(a.width/2,a.height,0,a.width/2,0,a.height);return b.addColorStop(0,"red"),b.addColorStop(.3,"orange"),b.addColorStop(.4,"yellow"),b.addColorStop(.5,"green"),b.addColorStop(.8,"blue"),b.addColorStop(1,"violet"),b},a.hitPolygon=function(a,b,c){var h,i,j,k,l,d=0,e=a[0],f=b<=e[0],g=c<=e[1];for(h=1,i=a.length;i+1>h;h++)j=a[h%i],k=b<=j[0],l=c<=j[1],g!=l&&(f==k?f&&(d+=g?-1:1):b<=e[0]+(j[0]-e[0])*(c-e[1])/(j[1]-e[1])&&(d+=g?-1:1)),e=j,f=k,g=l;return 0!=d},a.hitTestPolygon=function(a,b){var c,d,e,f,g,j,k,i=[[a,[],[]],[b,[],[]]];for(d=0;d<i.length;d++){for(f=i[d][0],g=i[d][1],c=0,e=f.length;e>c;c++)i[d][2].push(new LVec2(f[c][0],f[c][1])),e-1>c&&g.push(new LVec2(f[c+1][0]-f[c][0],f[c+1][1]-f[c][1]).normL());g.push(new LVec2(f[0][0]-f[e-1][0],f[0][1]-f[e-1][1]).normL())}for(d=0;d<i.length;d++)for(g=i[d][1],c=0,e=g.length;e>c;c++)if(j=LVec2.getMinMax(i[0][2],g[c]),k=LVec2.getMinMax(i[1][2],g[c]),j.max_o<k.min_o||j.min_o>k.max_o)return!1;return!0},a.hitTestPolygonArc=function(b,c){if(a.hitPolygon(b,c[0],c[1]))return!0;var d,e,f,g,h,i,j,k,l,m;for(d=0,f=b.length;f>d;d++)if(e=f-1>d?d+1:0,g=b[d],h=b[e],i=new LVec2(c[0]-g[0],c[1]-g[1]),j=new LVec2(h[0]-g[0],h[1]-g[1]),m=j.normalize(),l=LVec2.dot(i,m),0>=l){if(i.x*i.x+i.y*i.y<c[3])return!0}else if(l*l<j.x*j.x+j.y*j.y&&(k=LVec2.cross(i,m),k*k<c[3]))return!0;return!1},a.hitTestArc=function(a,b,c,d){var k,l,e=.5*a.getWidth(),f=.5*b.getWidth(),g=a._startX?a._startX():a.startX(),h=b._startX?b._startX():b.startX(),i=a._startY?a._startY():a.startY(),j=b._startY?b._startY():b.startY();return typeof c!=UNDEFINED&&(g+=e-c,i+=e-c,e=c),typeof d!=UNDEFINED&&(h+=f-d,j+=f-d,f=d),k=g+e-h-f,l=i+e-j-f,(e+f)*(e+f)>k*k+l*l},a.hitTestRect=function(a,b,c,d){var m,n,o,p,e=a.getWidth(),f=b.getWidth(),g=a.getHeight(),h=b.getHeight(),i=a._startX?a._startX():a.startX(),j=b._startX?b._startX():b.startX(),k=a._startY?a._startY():a.startY(),l=b._startY?b._startY():b.startY();return typeof c!=UNDEFINED&&(i+=.5*(e-c[0]),k+=.5*(g-c[1]),e=c[0],g=c[1]),typeof d!=UNDEFINED&&(j+=.5*(f-d[0]),l+=.5*(h-d[1]),f=d[0],h=d[1]),m=i>j?i:j,n=k>l?k:l,o=i+e>j+f?j+f:i+e,p=k+g>l+h?l+h:k+g,o>=m&&p>=n},a.hitTest=a.hitTestRect,a.setFrameRate=function(b){a.frameRate&&clearInterval(a.frameRate),a.speed=b,a.frameRate=setInterval(function(){a.onShow()},b)},a.ll_scaleX=function(b){return(b-a.left)*a.width/a.canvasStyleWidth},a.ll_scaleY=function(b){return(b-a.top)*a.height/a.canvasStyleHeight},a.ll_setStageSize=function(b,c){b=Math.ceil(b),c=Math.ceil(c),a.canvasObj.style.width=b+"px",a.canvasObj.style.height=c+"px",a.canvasStyleWidth=b,a.canvasStyleHeight=c},a.resize=function(b,c){var d,e,f=0,g=0,h=window.innerWidth,i=window.innerHeight;switch(a.innerWidth=h,a.innerHeight=i,b&&(d=b),c&&(e=c),"noScale"==a.stageScale&&(d=b||a.width,e=c||a.height),a.stageScale){case"exactFit":d=b||h,e=c||i;
break;case"noBorder":switch(d=b||h,e=c||a.height*h/a.width,a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:case LStageAlign.BOTTOM_RIGHT:case LStageAlign.BOTTOM_MIDDLE:f=i-e}break;case"showAll":h/i>a.width/a.height?(e=c||i,d=b||a.width*i/a.height):(d=b||h,e=c||a.height*h/a.width);case"noScale":default:switch(a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:f=i-e;break;case LStageAlign.RIGHT:case LStageAlign.TOP_RIGHT:g=h-d;break;case LStageAlign.TOP_MIDDLE:g=.5*(h-d);break;case LStageAlign.BOTTOM_RIGHT:f=i-e,g=h-d;break;case LStageAlign.BOTTOM_MIDDLE:f=i-e,g=.5*(h-d);break;case LStageAlign.MIDDLE:f=.5*(i-e),g=.5*(h-d);break;case LStageAlign.TOP:case LStageAlign.LEFT:case LStageAlign.TOP_LEFT:}}a.canvasObj.style.marginTop=f+"px",a.canvasObj.style.marginLeft=g+"px",a.isOldFirefox&&(a.left=parseInt(a.canvasObj.style.marginLeft),a.top=parseInt(a.canvasObj.style.marginTop)),a.ll_setStageSize(d,e)},a.sleep=function(a){for(var b=new Date;(new Date).getTime()-b.getTime()<a;);},a.screen=function(b){a.displayState=b,a.stage&&("number"==typeof a.displayState?a.resize(a.width*a.displayState,a.height*a.displayState):a.resize())},a}(),LSystem=LGlobal,LStage=LGlobal,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.apply(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind-what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.find||(Array.prototype.find=function(a){var b,c,d,e,f;if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(b=Object(this),c=b.length>>>0,d=arguments[1],f=0;c>f;f++)if(e=b[f],a.call(d,e,f,b))return e;return void 0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(a){var b,c,d,e,f;if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(b=Object(this),c=b.length>>>0,d=arguments[1],f=0;c>f;f++)if(e=b[f],a.call(d,e,f,b))return f;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d,e,f,g;if(null==this)throw new TypeError(" this is null or not defined");if(e=Object(this),f=e.length>>>0,"function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;)d in e&&(g=e[d],a.call(c,g,d,e)),d++}),Array.prototype.every||(Array.prototype.every=function(a,b){"use strict";var c,d,e,f,g,h;if(null==this)throw new TypeError("this is null or not defined");if(e=Object(this),f=e.length>>>0,"function"!=typeof a)throw new TypeError;for(arguments.length>1&&(c=b),d=0;f>d;){if(d in e&&(g=e[d],h=a.call(c,g,d,e),!h))return!1;d++}return!0}),Array.prototype.some||(Array.prototype.some=function(a){"use strict";var b,c,d,e;if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof a)throw new TypeError;for(b=Object(this),c=b.length>>>0,d=arguments.length>=2?arguments[1]:void 0,e=0;c>e;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),String.format||(String.format=function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/,b=a.exec(this.toString());return b&&b.length>1?b[1].trim():""},set:function(){}}),window.console||(window.console={log:trace,warn:trace}),LInit=init,LExtends=base,LObject=function(){function a(){this.type="LObject",this.objectIndex=++LGlobal.objectIndex,this.objectindex=this.objectIndex}return a.prototype={callParent:function(a,b){if(a&&b){var e,c=this,d=!1,f="__ll__parent_call"+a;return"undefined"==typeof c[f]?(d=!0,c[f]=0):c[f]++,c[f]>=c.__ll__parent__.length?!1:(e=c.__ll__parent__[c[f]][a]?c.__ll__parent__[c[f]][a].apply(c,b):c.callParent(a,b),d&&delete c[f],e)}},copyProperty:function(a){var c,b=this;for(c in a)if("number"==typeof a[c]||"string"==typeof a[c]||"boolean"==typeof a[c]){if("objectindex"==c||"objectIndex"==c)continue;b[c]=a[c]}else Array.isArray(a[c])&&(b[c]=a[c].slice());a.mask&&(b.mask=a.mask.clone())},toString:function(){return"[object "+this.constructor.name+"]"}},a}(),LColorTransform=function(){function a(a,b,c,d,e,f,g,h){var i=this;LExtends(i,LObject,[]),i.redMultiplier=a,i.greenMultiplier=b,i.blueMultiplier=c,i.alphaMultiplier=d,i.redOffset=e,i.greenOffset=f,i.blueOffset=g,i.alphaOffset=h}return a}(),LTransform=function(){function a(){var a=this;LExtends(a,LObject,[]),a.matrix=null}return a}(),LMatrix=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;LExtends(j,LObject,[]),j.a=1,j.b=0,j.u=0,j.c=0,j.d=1,j.v=0,j.tx=0,j.ty=0,j.w=1,typeof a!=UNDEFINED&&(j.a=a),typeof b!=UNDEFINED&&(j.b=b),typeof c!=UNDEFINED&&(j.c=c),typeof d!=UNDEFINED&&(j.d=d),typeof e!=UNDEFINED&&(j.tx=e),typeof f!=UNDEFINED&&(j.ty=f),typeof g!=UNDEFINED&&(j.u=g),typeof h!=UNDEFINED&&(j.v=h),typeof i!=UNDEFINED&&(j.w=i)}var c,b={setTo:function(a,b,c,d,e,f,g,h,i){var j=this;return typeof a!=UNDEFINED&&(j.a=a),typeof b!=UNDEFINED&&(j.b=b),typeof c!=UNDEFINED&&(j.c=c),typeof d!=UNDEFINED&&(j.d=d),typeof e!=UNDEFINED&&(j.tx=e),typeof f!=UNDEFINED&&(j.ty=f),typeof g!=UNDEFINED&&(j.u=g),typeof h!=UNDEFINED&&(j.v=h),typeof i!=UNDEFINED&&(j.w=i),j},isIdentity:function(){var a=this;return 1==a.a&&0==a.b&&0==a.c&&1==a.d&&0==a.tx&&0==a.ty&&0==u&&0==v&&1==w},transform:function(a){var b=this;return a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),b},identity:function(){this.setTo(1,0,0,1,0,0,0,0,1)},rotate:function(b){var c=this,d=b*Math.PI/180,e=Math.cos(d),f=Math.sin(d),g=new a(e,f,-f,e,0,0,0,0,1);return c.add(g),c},scale:function(b,c){var d=this,e=new a(b,0,0,c,0,0,0,0,1);return d.add(e),d},translate:function(b,c){var d=this,e=new a(1,0,0,1,b,c,0,0,1);return d.add(e),d},skew:function(b,c){var d=this,e=new a(1,c,b,1,0,0,0,0,1);return d.add(e),d},add:function(a){var c,d,e,f,g,h,i,j,k,b=this;c=b.a*a.a+b.b*a.c+b.u*a.tx,d=b.a*a.b+b.b*a.d+b.u*a.ty,i=b.a*a.u+b.b*a.v+b.u*a.w,e=b.c*a.a+b.d*a.c+b.v*a.tx,f=b.c*a.b+b.d*a.d+b.v*a.ty,j=b.c*a.u+b.d*a.v+b.v*a.w,g=b.tx*a.a+b.ty*a.c+b.w*a.tx,h=b.tx*a.b+b.ty*a.d+b.w*a.ty,k=b.tx*a.u+b.ty*a.v+b.w*a.w,b.setTo(c,d,e,f,g,h,i,j,k)},toArray:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,b=this;return Array.isArray(a)&&3==a.length?(c=a[0]*b.a+a[1]*b.c+a[2]*b.tx,d=a[0]*b.b+a[1]*b.d+a[2]*b.ty,e=a[0]*b.u+a[1]*b.v+a[2]*b.w,[c,d,e]):(f=b.a*a.a+b.b*a.c+b.u*a.tx,g=b.a*a.b+b.b*a.d+b.u*a.ty,h=b.a*a.u+b.b*a.v+b.u*a.w,i=b.c*a.a+b.d*a.c+b.v*a.tx,j=b.c*a.b+b.d*a.d+b.v*a.ty,k=b.c*a.u+b.d*a.v+b.v*a.w,l=b.tx*a.a+b.ty*a.c+b.w*a.tx,m=b.tx*a.b+b.ty*a.d+b.w*a.ty,n=b.tx*a.u+b.ty*a.v+b.w*a.w,[f,g,i,j,l,m,h,k,n])},clone:function(){var b=this;return new a(b.a,b.b,b.c,b.d,b.tx,b.ty,b.u,b.v,b.w)}};for(c in b)a.prototype[c]=b[c];return a}(),LVec2=function(){function a(a,b){this.x=a||0,this.y=b||0}return a.dot=function(a,b){return a.x*b.x+a.y*b.y},a.cross=function(a,b){return a.x*b.y-a.y*b.x},a.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)},a.getMinMax=function(b,c){var h,i,j,d=a.dot(b[0],c),e=a.dot(b[0],c),f=0,g=0;for(h=1;h<b.length;h++)i=a.dot(b[h],c),d>i&&(d=i,f=h),i>e&&(e=i,g=h);return j={min_o:d,min_i:f,max_o:e,max_i:g}},a.prototype={length:function(){var a=this;return Math.sqrt(a.x*a.x+a.y*a.y)},normalize:function(){var b=this,c=b.length();return new a(b.x/c,b.y/c)},normR:function(){return new a(-this.y,this.x)},normL:function(){return new a(this.y,-this.x)}},a}(),LEventDispatcher=function(){function a(){var a=this;LExtends(a,LObject,[]),a._eventList=new Array}var c,b={addEventListener:function(a,b){this._eventList.push({listener:b,type:a})},removeEventListener:function(a,b){var d,e,c=this;for(e=c._eventList.length,d=0;e>d;d++)if(c._eventList[d]&&a==c._eventList[d].type&&(!b||c._eventList[d].listener==b))return c._eventList.splice(d,1),void 0},removeAllEventListener:function(){this._eventList=[]},dispatchEvent:function(a){var c,b=this,d=b._eventList.length,e="string"==typeof a?a:a.eventType;for(c=0;d>c;c++)if(b._eventList[c]&&e==b._eventList[c].type){if("string"==typeof a)b.currentTarget=b.target=b,b.eventType=b.event_type=e,b._eventList[c].listener(b),delete b.currentTarget,delete b.target,delete b.eventType;else if(a.target||(a.target=b),a.currentTarget||(a.currentTarget=a.target),a._ll_preventDefault=!1,b._eventList[c].listener(a),a._ll_preventDefault)return!1;return!0}return!1},hasEventListener:function(a,b){var d,c=this,e=c._eventList.length;for(d=0;e>d;d++)if(c._eventList[d]&&a==c._eventList[d].type&&(typeof b==UNDEFINED||b==c._eventList[d].listener))return!0;return!1}};for(c in b)a.prototype[c]=b[c];return a}(),LDisplayObject=function(){function a(){var a=this;LExtends(a,LEventDispatcher,[]),a.name="instance"+a.objectIndex,a.x=0,a.y=0,a.width=0,a.height=0,a.scaleX=1,a.scaleY=1,a.alpha=1,a.visible=!0,a.rotate=0,a.mask=null,a.blendMode=null,a.filters=null,a.transform=new LTransform,a.parent=null}var c,b={_createCanvas:function(){var a=this;a._canvas||(a._canvas=document.createElement("canvas"),a._context=a._canvas.getContext("2d"))},ll_show:function(){var a=this,b=LGlobal.canvas;a._canShow()&&(a._ll_trans=!1,LGlobal.box2d||"function"!=typeof a._ll_loopframe||a._ll_loopframe(),b.save(),a._showReady(b),a.blendMode&&(b.globalCompositeOperation=a.blendMode),a.filters&&a._ll_setShadow(),a._rotateReady(),null!=a.mask&&a.mask.ll_show&&(a.mask.ll_show(),b.clip()),a._transformRotate(),a._transformScale(),a._coordinate(b),a.transform.matrix&&a.transform.matrix.transform(b),a.alpha<1&&(a._ll_trans=!0,b.globalAlpha=a.alpha),LGlobal.fpsStatus&&(LGlobal.fpsStatus.display++,a._ll_trans&&LGlobal.fpsStatus.transform++),a._ll_show(b),b.restore(),null!=LGlobal.box2d&&"function"==typeof a._ll_loopframe&&a._ll_loopframe())},_canShow:function(){return this.visible},_coordinate:function(a){var b=this;(0!=b.x||0!=b.y)&&(b._ll_trans=!0,a.transform(1,0,0,1,b.x,b.y))},_rotateReady:function(){},_showReady:function(){},_ll_show:function(){},_ll_setShadow:function(){var c,d,a=this,b=a.filters;if(b)for(c=0,d=b.length;d>c;c++)b[c].ll_show()},_transformRotate:function(){var b,a=this;0!=a.rotate&&(a._ll_trans=!0,b=LGlobal.canvas,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof a.rotatex==UNDEFINED&&(a.rotatex=0,a.rotatey=0),a.box2dBody&&(rotateFlag=1),rotateObj.a=Math.cos(a.rotate*rotateFlag),rotateObj.b=Math.sin(a.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a,rotateObj.tx=a.x+a.rotatex,rotateObj.ty=a.y+a.rotatey,rotateObj.transform(b).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(b))},_transformScale:function(){var c,a=this,b=LGlobal.canvas;(1!=a.scaleX||1!=a.scaleY)&&(a._ll_trans=!0,c=new LMatrix,1!=a.scaleX&&(c.tx=a.x),1!=a.scaleY&&(c.ty=a.y),c.a=a.scaleX,c.d=a.scaleY,c.transform(b).setTo(1,0,0,1,-c.tx,-c.ty).transform(b))},getAbsoluteScale:function(){var b,c,d,a=this;for(b=a.scaleX,c=a.scaleY,d=a.parent;d&&"root"!=d;)b*=d.scaleX,c*=d.scaleY,d=d.parent;return{scaleX:b,scaleY:c}},getRootCoordinate:function(){var b,c,d,a=this;for(b=a.x,c=a.y,d=a.parent;d&&"root"!=d;)b*=d.scaleX,c*=d.scaleY,b+=d.x,c+=d.y,d=d.parent;return new LPoint(b,c)},getBounds:function(a){if(typeof a==UNDEFINED)return new LRectangle(0,0,0,0);var g,h,b=this,c=0,d=0,e=0,f=0;return b.objectIndex!=a.objectIndex&&(g=b.getRootCoordinate(),h=a.getRootCoordinate(),c=g.x-h.x,d=g.y-h.y),a.getWidth&&(e=a.getWidth()),a.getHeight&&(f=a.getHeight()),new LRectangle(c,d,e,f)},getDataCanvas:function(){var b,c,d,e,f,g,a=this;return a._createCanvas(),c=LGlobal.canvasObj,e=LGlobal.canvas,b=a._canvas,d=a._context,a.width=a.getWidth(),a.height=a.getHeight(),b.width=a.width,b.height=a.height,d.clearRect(0,0,a.width,a.height),LGlobal.canvasObj=a._canvas,LGlobal.canvas=a._context,f=a.x,g=a.y,a.x=a.y=0,a.ll_show(),a.x=f,a.y=g,a._canvas=b,a._context=d,LGlobal.canvasObj=c,LGlobal.canvas=e,a._canvas},getDataURL:function(){var a=this,b=a.getDataCanvas();return b.toDataURL.apply(b,arguments)},ismouseonShapes:function(a,b,c){var f,g,h,i,j,d=this;for(typeof a==UNDEFINED&&(a=d.shapes),f=d.getRootMatrix(),h=a.length-1;h>=0;h--)if(g=a[h],j=g.arg,i=d._changeShape(g.type,j,f),g.type==LShape.VERTICES){if(LGlobal.hitPolygon(i,b,c))return!0}else if(g.type==LShape.RECT){if(LGlobal.hitPolygon(i,b,c))return!0}else if(g.type==LShape.ARC&&(i[0]-b)*(i[0]-b)+(i[1]-c)*(i[1]-c)<i[3])return!0;return!1},_changeShape:function(a,b,c){var d,e,f,g,h,i,b=b;if(a==LShape.VERTICES)for(d=[],f=0,g=b.length;g>f;f++)d[f]=c.toArray([b[f][0],b[f][1],1]);else if(a==LShape.RECT)for(d=[[b[0],b[1]],[b[0]+b[2],b[1]],[b[0]+b[2],b[1]+b[3]],[b[0],b[1]+b[3]]],f=0,g=d.length;g>f;f++)d[f]=c.toArray([d[f][0],d[f][1],1]);else a==LShape.ARC&&(h=c.toArray([b[0],b[1],1]),i=c.toArray([b[0]+b[2],b[1],1]),e=(h[0]-i[0])*(h[0]-i[0])+(h[1]-i[1])*(h[1]-i[1]),d=[h[0],h[1],Math.sqrt(e),e]);return d},getRootMatrix:function(){for(var a=this,b=new LMatrix;a&&"root"!=a;)(1!=a.scaleX||1!=a.scaleY)&&b.scale(a.scaleX,a.scaleY),0!=a.rotate&&b.rotate(a.rotate),(0!=a.x||0!=a.y)&&b.translate(a.x,a.y),a=a.parent;return b},remove:function(){var a=this,b=a.parent;b&&"root"!=b&&(b.removeChild(a),a._ll_removeFromSelf=!0)}};for(c in b)a.prototype[c]=b[c];return a}(),LInteractiveObject=function(){function a(){var a=this;LExtends(a,LDisplayObject,[]),a.type="LInteractiveObject",a.mouseEnabled=!0,a.mouseList=new Array}var c,b={addEventListener:function(a,b){var c=this;if(a.indexOf("mouse")>=0||a.indexOf("touch")>=0||a==LMouseEvent.DOUBLE_CLICK){if(LMouseEventContainer.container[a]||(a==LMouseEvent.MOUSE_OVER||a==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return LMouseEventContainer.addMouseEvent(c,a,b),void 0;c.mouseList.push({listener:b,type:a})}else c._eventList.push({listener:b,type:a})},removeEventListener:function(a,b){var d,e,c=this;if(!(a.indexOf("mouse")>=0||a.indexOf("touch")>=0||a==LMouseEvent.DOUBLE_CLICK))return c.callParent("removeEventListener",arguments);if(LMouseEventContainer.container[a]||(a==LMouseEvent.MOUSE_OVER||a==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return LMouseEventContainer.removeMouseEvent(c,a,b),void 0;for(e=c.mouseList.length,d=0;e>d;d++)if(c.mouseList[d]&&a==c.mouseList[d].type&&c.mouseList[d].listener==b)return c.mouseList.splice(d,1),void 0},removeAllEventListener:function(){var a=this;a.mouseList.length=0,a._eventList.length=0,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.removeMouseEvent(a,LMouseEvent.MOUSE_DOWN),LMouseEventContainer.container[LMouseEvent.MOUSE_UP]&&LMouseEventContainer.removeMouseEvent(a,LMouseEvent.MOUSE_UP),LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&(LMouseEventContainer.removeMouseEvent(a,LMouseEvent.MOUSE_MOVE),LMouseEventContainer.removeMouseEvent(a,LMouseEvent.MOUSE_OVER),LMouseEventContainer.removeMouseEvent(a,LMouseEvent.MOUSE_OUT))},hasEventListener:function(a,b){var d,e,c=this;if(LMouseEventContainer.container[a])return LMouseEventContainer.hasEventListener(c,a,b);if(!(a.indexOf("mouse")>=0||a.indexOf("touch")>=0||a==LMouseEvent.DOUBLE_CLICK))return c.callParent("hasEventListener",arguments);for(e=c.mouseList.length,d=0;e>d;d++)if(c.mouseList[d]&&a==c.mouseList[d].type&&(!b||c.mouseList[d].listener==b))return!0;return!1}};for(c in b)a.prototype[c]=b[c];return a}(),LDisplayObjectContainer=function(){function a(){var a=this;LExtends(a,LInteractiveObject,[]),a.childList=new Array,a.numChildren=0,a.mouseChildren=!0}var c,b={addChild:function(a){var c,b=this;return a.parent&&(c=LGlobal.destroy,LGlobal.destroy=!1,a.parent.removeChild(a),LGlobal.destroy=c),a.parent=b,b.childList.push(a),b.numChildren=b.childList.length,b._ll_removeFromSelf=!1,a},addChildAt:function(a,b){var d,c=this;if(!(0>b||b>c.childList.length))return"function"==typeof a.remove&&(d=LGlobal.destroy,LGlobal.destroy=!1,a.remove(),LGlobal.destroy=d),a.parent=c,c.childList.splice(b,0,a),c.numChildren=c.childList.length,c._ll_removeFromSelf=!1,a},removeChild:function(a){var d,e,b=this,c=b.childList;for(d=0,e=c.length;e>d;d++)if(a.objectIndex==c[d].objectIndex){LGlobal.destroy&&a.die&&a.die(),b.childList.splice(d,1);break}b.numChildren=b.childList.length,delete a.parent},getChildAt:function(a){var b=this,c=b.childList;return 0==c.length||c.length<=a?null:c[a]},getChildByName:function(a){var d,e,b=this,c=b.childList;for(d=0,e=c.length;e>d;d++)if(c[d]&&c[d].name==a)return c[d];return null},removeChildAt:function(a){var d,b=this,c=b.childList;if(!(c.length<=a))return LGlobal.destroy&&c[a].die&&c[a].die(),d=b.childList.splice(a,1),b.numChildren=b.childList.length,d},getChildIndex:function(a){if(!a)return-1;var d,b=this,c=b.childList,e=c.length;for(d=0;e>d;d++)if(c[d].objectIndex==a.objectIndex)return d;return-1},setChildIndex:function(a,b){var e,c=this,d=c.childList,f=d.length;if("root"==a.parent||a.parent.objectIndex!=c.objectIndex||0>b||b>=f)return-1;for(e=0;f>e&&d[e].objectIndex!=a.objectIndex;e++);return c.childList.splice(e,1),c.childList.splice(b,0,a),b},resize:function(){var a=this;a.width=a.getWidth(),a.height=a.getHeight()},removeAllChild:function(){var c,d,a=this,b=a.childList;for(c=0,d=b.length;d>c;c++)LGlobal.destroy&&b[c].die&&b[c].die();a.childList.length=0,a.width=0,a.height=0,a.numChildren=0}};for(c in b)a.prototype[c]=b[c];return a}(),LLoader=function(){function a(){var a=this;LExtends(a,LEventDispatcher,[]),a.type="LLoader"}return a.TYPE_BITMAPDATE="bitmapData",a.prototype.load=function(b,c){var d=this;c||(c=a.TYPE_BITMAPDATE),d.loadtype=c,c==a.TYPE_BITMAPDATE&&(d.content=new Image,d.content.onload=function(){d.content.onload=null;var a=new LEvent(LEvent.COMPLETE);a.currentTarget=d,a.target=d.content,d.dispatchEvent(a),delete d.content},d.content.src=b)},a}(),LURLLoader=function(){function a(){var a=this;LExtends(a,LEventDispatcher,[]),a.type="LURLLoader",a.loadtype="",a.content=null,a.event={}}return a.TYPE_TEXT="text",a.TYPE_JS="js",a.prototype.load=function(b,c){var e,f,g,d=this;c||(f=getExtension(b),"txt"==f?c=a.TYPE_TEXT:"js"==f&&(c=a.TYPE_JS)),d.loadtype=c,c==a.TYPE_TEXT?LAjax.get(b,{},function(a){e=new LEvent(LEvent.COMPLETE),d.data=a,e.currentTarget=d,e.target=a,d.dispatchEvent(e),delete d.content,delete d.data}):c==a.TYPE_JS&&(g=document.createElement("script"),g.onload=function(){e=new LEvent(LEvent.COMPLETE),e.currentTarget=d,e.target=d,d.dispatchEvent(e),delete d.content},g.src=b,g.type="text/javascript",document.querySelector("head").appendChild(g))},a}(),LWebAudio=function(){function a(){var a=this;LExtends(a,LEventDispatcher,[]),a.currentTime=0,a.currentStart=0,a.currentSave=0,a.length=0,a.loopStart=0,a.loopEnd=0,a.loopIndex=0,a.loopLength=1,a.playing=!1,a.volume=1,LSound.Container.add(a)}var c,d;a.container=[],a.containerCount=0;try{a.audioTag=new Audio}catch(b){console.warn("ReferenceError:Can't find variable:Audio"),a.audioTag={canPlayType:function(){return!1}}}a._context=null,c={getWebAudio:function(){var b;if(a.containerCount>0)b=a.container.shift();else if(typeof AudioContext!==UNDEFINED)try{b=new AudioContext}catch(c){a.containerCount=a.container.length,b=a.container.shift()}else{if(typeof webkitAudioContext===UNDEFINED)throw"AudioContext not supported.:(";try{b=new webkitAudioContext}catch(c){a.containerCount=a.container.length,b=a.container.shift()}}return b.createGainNode||(b.createGainNode=b.createGain),a.container.push(b),b},onload:function(a){var c,b=this;return"[object AudioBuffer]"!==Object.prototype.toString.apply(a)?(b.load(a),void 0):(b.data||(b.data=b.getWebAudio()),b.buffer=a,b.length=b.buffer.duration,c=new LEvent(LEvent.COMPLETE),c.currentTarget=b,c.target=b.buffer,b.dispatchEvent(c),void 0)},_onended:function(){var a=this;a.dispatchEvent(LEvent.SOUND_COMPLETE),a.close(),++a.loopIndex<a.loopLength&&a.play(a.currentStart,void 0,a.currentTimeTo)},load:function(b){var d,e,f,g,h,i,j,c=this;if("string"!=typeof b)return"[object AudioBuffer]"==Object.prototype.toString.apply(b)?c.onload(b):"[object ArrayBuffer]"==Object.prototype.toString.apply(b)&&(c.data||(c.data=c.getWebAudio()),c.data.decodeAudioData(b,c.onload.bind(c),function(a){throw"AudioContext decodeAudioData error:"+a.toString()})),void 0;for(i={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]},d=b.split(","),g=0;g<d.length;g++){if(e=d[g].split("."),h=e[e.length-1],h=i[h]?i[h]:[h],f=h.some(function(b){return a.audioTag.canPlayType(c._type+"/"+b)}))return LAjax.responseType=LAjax.ARRAY_BUFFER,LAjax.get(d[g],{},c.onload.bind(c)),void 0;console.warn("Not support "+e[e.length-1]+":"+d[g]),j=new LEvent(LEvent.COMPLETE),j.currentTarget=j.target=c,c.dispatchEvent(j)}},getCurrentTime:function(){var a=this;return a.playing?a.data.currentTime-a.currentSave+a.currentTime:a.currentSave},setVolume:function(a){var b=this;b.volume=a,b.playing&&(b.volumeNode.gain.value=a)},getVolume:function(){return this.volume},play:function(a,b,c){var d=this;0!=d.length&&(typeof b!==UNDEFINED&&(d.loopIndex=0,d.loopLength=b),typeof a!==UNDEFINED&&(d.currentTime=a,d.currentStart=a),d.currentTimeTo=typeof c!==UNDEFINED?c>d.length?d.length:c:d.length,d.data.loop=!1,d.playing=!0,d.timeout&&(clearTimeout(d.timeout),delete d.timeout),d.timeout=setTimeout(d._onended.bind(d),1e3*(d.currentTimeTo-d.currentTime)),d.bufferSource=d.data.createBufferSource(),d.bufferSource.buffer=d.buffer,d.volumeNode=d.data.createGainNode(),d.volumeNode.gain.value=d.volume,d.volumeNode.connect(d.data.destination),d.bufferSource.connect(d.volumeNode),d.currentSave=d.data.currentTime,d.bufferSource.start?d.bufferSource.start(0,d.currentTime,d.length-d.currentTime):d.bufferSource.noteGrainOn(0,d.currentTime,d.length-d.currentTime))},playSegment:function(a,b,c){this.playTo(a,a+b,c)},playTo:function(a,b,c){this.play(a,c,b)},stop:function(){var a=this;a.playing&&(a.timeout&&(clearTimeout(a.timeout),delete a.timeout),a.bufferSource.stop?a.bufferSource.stop(0):a.bufferSource.noteOff(0),a.currentSave=a.getCurrentTime(),a.currentTime=a.currentSave,a.playing=!1)},close:function(){var a=this;a.playing&&(a.timeout&&(clearTimeout(a.timeout),delete a.timeout),a.bufferSource.stop?a.bufferSource.stop(0):a.bufferSource.noteOff(0),a.playing=!1,a.currentTime=0,a.currentSave=0)},ll_check:function(){var a=this;a.playing&&a.currentTimeTo<a.data.currentTime-a.currentSave+.001*LSound.Container.time&&a._onended()},die:function(){LSound.Container.remove(this)}};for(d in c)a.prototype[d]=c[d];return a}(),LMedia=function(){function a(){var a=this;LExtends(a,LDisplayObject,[]),a.length=0,a.loopIndex=0,a.loopLength=1,a.playing=!1,a.oncomplete=null,a.onsoundcomplete=null,a.currentStart=0,LSound.Container.add(this)}var c,b={onload:function(){var b,a=this;return a.data.readyState?(a.length=a.data.duration-(LGlobal.android?.1:0),b=new LEvent(LEvent.COMPLETE),b.currentTarget=a,b.target=a.data,a.dispatchEvent(b),void 0):(a.data.addEventListener("canplaythrough",function(){a.onload()},!1),void 0)},_onended:function(){var b,c,a=this;a.dispatchEvent(LEvent.SOUND_COMPLETE),++a.loopIndex<a.loopLength?(b=a.loopIndex,c=a.loopLength,a.close(),a.play(a.currentStart,a.loopLength,a.currentTimeTo),a.loopIndex=b):a.close()},load:function(a){var c,d,e,f,g,h,i,b=this;if("[object HTMLAudioElement]"==Object.prototype.toString.apply(a))return b.data=a,b.onload(),void 0;for(h={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]},c=a.split(","),f=0;f<c.length;f++){if(d=c[f].split("."),g=d[d.length-1],g=h[g]?h[g]:[g],e=g.some(function(a){return b.data.canPlayType(b._type+"/"+a)}))return b.data.src=c[f],b.onload(),b.data.load(),void 0;console.warn("Not support "+d[d.length-1]+":"+c[f]),i=new LEvent(LEvent.COMPLETE),i.currentTarget=i.target=b,b.dispatchEvent(i)}b.oncomplete&&b.oncomplete({})},getCurrentTime:function(){return this.data.currentTime},setVolume:function(a){this.data.volume=a},getVolume:function(){return this.data.volume},play:function(a,b,c){var d=this;0!=d.length&&(LGlobal.android&&LSound.Container.stopOther(this),typeof a!=UNDEFINED&&(d.data.currentTime=a,d.currentStart=a),typeof b!=UNDEFINED&&(d.loopLength=b),d.currentTimeTo=typeof c!==UNDEFINED?c>d.length?d.length:c:d.length,d.timeout&&(clearTimeout(d.timeout),delete d.timeout),d.timeout=setTimeout(function(){d._onended()},1e3*(d.currentTimeTo-d.data.currentTime)),d.data.loop=!1,d.loopIndex=0,d.playing=!0,d.data.play())},playSegment:function(a,b,c){this.playTo(a,a+b,c)},playTo:function(a,b,c){this.play(a,c,b)},stop:function(){var a=this;a.playing&&(a.timeout&&(clearTimeout(a.timeout),delete a.timeout),a.playing=!1,a.data.pause())},close:function(){var a=this;a.playing&&(a.timeout&&(clearTimeout(a.timeout),delete a.timeout),a.playing=!1,a.data.pause(),a.data.currentTime=0,a.currentSave=0)},ll_check:function(){var a=this;a.playing&&(a.data.duration!=a._ll_duration&&(a._ll_duration=a.data.duration,a.length=a.data.duration-(LGlobal.android?.1:0)),a.currentTimeTo<a.data.currentTime+.005*LSound.Container.time&&a._onended())},die:function(){LSound.Container.remove(this)}};for(c in b)a.prototype[c]=b[c];return a}(),LSound=function(){function a(b){var c=this;if(c.type="LSound",c._type="audio",a.webAudioEnabled&&LGlobal.webAudio)LExtends(c,LWebAudio,[]);else{LExtends(c,LMedia,[]);try{c.data=new Audio}catch(d){console.warn("ReferenceError:Can't find variable:Audio"),c.data={}}c.data.loop=!1,c.data.autoplay=!1}b&&c.load(b)}a.TYPE_SOUND="sound",a.webAudioEnabled=!1;var b=location.protocol;if("http:"==b||"https:"==b){if(typeof AudioContext!==UNDEFINED)try{LWebAudio._context=new AudioContext}catch(c){}else if(typeof webkitAudioContext!==UNDEFINED)try{LWebAudio._context=new webkitAudioContext}catch(c){}LWebAudio._context&&(LWebAudio.container.push(LWebAudio._context),a.webAudioEnabled=!0)}return a.Container={ll_save:0,time:0,list:[],ll_show:function(){var d,e,b=a.Container,c=(new Date).getTime();for(b.time=c-(b.ll_save?b.ll_save:c),b.ll_save=c,d=b.list,e=d.length-1;e>=0;e--)d[e]&&d[e].ll_check()},add:function(b){a.Container.list.indexOf(b)>=0||a.Container.list.push(b)},remove:function(b){var d,c=a.Container.list;for(d=c.length-1;d>=0;d--)if(c[d].objectIndex==b.objectIndex){c.splice(d,1);break}},stopOther:function(b){var d,c=a.Container.list;for(d=c.length-1;d>=0;d--)c[d].objectIndex!=b.objectIndex&&c[d].stop()}},LGlobal.childList.push(a.Container),a}(),LVideo=function(){function a(a){var b=this;LExtends(b,LMedia,[]),b.type="LVideo",b._type="video",b.rotatex=0,b.rotatey=0,b.data=document.createElement("video"),b.data.style.display="none",document.body.appendChild(b.data),b.data.id="video_"+b.objectIndex,b.data.loop=!1,b.data.autoplay=!1,a&&b.load(a)}var c,b={_ll_show:function(a){var b=this;a.drawImage(b.data,b.x,b.y)},die:function(){var a=this;document.body.removeChild(a.data),delete a.data},getWidth:function(){return this.data.width},getHeight:function(){return this.data.height}};for(c in b)a.prototype[c]=b[c];return a}(),LPoint=function(){function a(a,b){var c=this;c.x=a,c.y=b}return a.distance=function(b,c){return a.distance2(b.x,b.y,c.x,c.y)},a.distance2=function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},a.interpolate=function(b,c,d){return new a(b.x+(c.x-b.x)*(1-d),b.y+(c.y-b.y)*(1-d))},a.polar=function(b,c){return new a(b*Math.cos(c),b*Math.sin(c))},a.prototype={toString:function(){return"[object LPoint("+this.x+","+this.y+")]"},length:function(){return a.distance2(this.x,this.y,0,0)},add:function(b){return new a(this.x+b.x,this.y+b.y)},clone:function(){return new a(this.x,this.y)},setTo:function(a,b){this.x=a,this.y=b},copyFrom:function(a){this.setTo(a.x,a.y)},equals:function(a){return this.x==a.x&&this.y==a.y},normalize:function(a){var b=this,c=a/b.length();b.x*=c,b.y*=c},offset:function(a,b){this.x+=a,this.y+=b},subtract:function(b){return new a(this.x-b.x,this.y-b.y)}},a}(),LRectangle=function(){function a(a,b,c,d){var e=this;e.x=a,e.y=b,e.width=c,e.height=d,e.setRectangle()}return a.prototype={setRectangle:function(){var a=this;a.bottom=a.y+a.height,a.right=a.x+a.width,a.left=a.x,a.top=a.y},clone:function(){var b=this;return new a(b.x,b.y,b.width,b.height)},contains:function(a,b){var c=this;return a>=c.x&&a<=c.right&&b>=c.y&&b<=c.bottom},containsRect:function(a){var b=this;return a.x>=b.x&&a.right<=b.right&&a.y>=b.y&&a.bottom<=b.bottom},equals:function(a){var b=this;return a.x==b.x&&a.width==b.width&&a.y==b.y&&a.height==b.height},inflate:function(a,b){var c=this;c.width+=a,c.height+=b,c.setRectangle()},intersection:function(b){var c=this,d=c.x>b.x?c.x:b.x,e=c.y>b.y?c.y:b.y,f=c.right>b.right?b.right:c.right,g=c.bottom>b.bottom?b.bottom:c.bottom;return f>=d&&g>=e?new a(d,e,f,g):new a(0,0,0,0)},intersects:function(a){var b=this,c=b.x>a.x?b.x:a.x,d=b.y>a.y?b.y:a.y,e=b.right>a.right?a.right:b.right,f=b.bottom>a.bottom?a.bottom:b.bottom;return e>=c&&f>=d},isEmpty:function(){var a=this;return 0==a.x&&0==a.y&&0==a.width&&0==a.height},offset:function(a,b){var c=this;c.x+=a,c.y+=b,c.setRectangle()},setEmpty:function(){var a=this;a.x=0,a.y=0,a.width=0,a.height=0,a.setRectangle()},setTo:function(a,b,c,d){var e=this;e.x=a,e.y=b,e.width=c,e.height=d,e.setRectangle()},toString:function(){var a=this;return"[object LRectangle("+a.x+","+a.y+","+a.width+","+a.height+")]"},union:function(b){var c=this;return new a(c.x>b.x?b.x:c.x,c.y>b.y?b.y:c.y,c.right>b.right?c.right:b.right,c.bottom>b.bottom?c.bottom:b.bottom)}},a}(),LGraphics=function(){function a(){var a=this;LExtends(a,LObject,[]),a.type="LGraphics",a.color="#000000",a.alpha=1,a.bitmap=null,a.setList=new Array,a.showList=new Array}var c,b={ll_show:function(){var b,a=this,c=a.setList.length;if(0!=c)for(b=0;c>b;b++)a.setList[b](),LGlobal.fpsStatus&&LGlobal.fpsStatus.graphics++},clone:function(){var d,e,f,b=this,c=new a;for(c.color=b.color,c.alpha=b.alpha,c.bitmap=b.bitmap,d=0,e=b.setList.length;e>d;d++)f=b.setList[d],c.setList.push(f);for(d=0,e=b.showList.length;e>d;d++)f=b.showList[d],c.showList.push(f);return c},lineCap:function(a){var b=this;b.setList.push(function(){LGlobal.canvas.lineCap=a})},lineJoin:function(a){var b=this;b.setList.push(function(){LGlobal.canvas.lineJoin=a})},lineWidth:function(a){var b=this;b.setList.push(function(){LGlobal.canvas.lineWidth=a})},strokeStyle:function(a){var b=this;b.setList.push(function(){LGlobal.canvas.strokeStyle=a})},stroke:function(){var a=this;a.setList.push(function(){LGlobal.canvas.stroke()})},beginPath:function(){var a=this;a.setList.push(function(){LGlobal.canvas.beginPath()})},closePath:function(){var a=this;a.setList.push(function(){LGlobal.canvas.closePath()})},moveTo:function(a,b){var c=this;c.setList.push(function(){LGlobal.canvas.moveTo(a,b)}),c.showList.push({type:LShape.POINT,arg:[a,b]})},lineTo:function(a,b){var c=this;c.setList.push(function(){LGlobal.canvas.lineTo(a,b)}),c.showList.push({type:LShape.POINT,arg:[a,b]})},rect:function(a,b,c,d){var e=this;e.setList.push(function(){LGlobal.canvas.rect(a,b,c,d)}),e.showList.push({type:LShape.RECT,arg:[a,b,c,d]})},fillStyle:function(a){var b=this;b.setList.push(function(){LGlobal.canvas.fillStyle=a})},fill:function(){var a=this;a.setList.push(function(){LGlobal.canvas.fill()})},arc:function(a,b,c,d,e,f){var g=this;g.setList.push(function(){LGlobal.canvas.arc(a,b,c,d,e,f)}),g.showList.push({type:LShape.ARC,arg:d})},lineStyle:function(a,b){var d,c=this;null==b&&(b=c.color),c.color=b,c.setList.push(function(){d=LGlobal.canvas,d.lineWidth=a,d.strokeStyle=b
})},clear:function(){var a=this;a.bitmap=null,a.setList.length=0,a.showList.length=0},beginBitmapFill:function(a){var b=this;b.setList.push(function(){b.bitmap=a})},drawEllipse:function(a,b,c,d,e){var f=this;f.setList.push(function(){var g,h,i,j,k,l,m,n,o,p,q,r;return g=LGlobal.canvas,g.beginPath(),l=.5522848,h=c[0],i=c[1],j=c[2],k=c[3],m=j/2*l,n=k/2*l,o=h+j,p=i+k,q=h+j/2,r=i+k/2,g.moveTo(h,r),g.bezierCurveTo(h,r-n,q-m,i,q,i),g.bezierCurveTo(q+m,i,o,r-n,o,r),g.bezierCurveTo(o,r+n,q+m,p,q,p),g.bezierCurveTo(q-m,p,h,r+n,h,r),f.bitmap?(g.save(),g.clip(),g.drawImage(f.bitmap.image,f.bitmap.x,f.bitmap.y,f.bitmap.width,f.bitmap.height,0,0,f.bitmap.width,f.bitmap.height),g.restore(),f.bitmap=null,void 0):(d&&(g.fillStyle=e,g.fill()),a>0&&(g.lineWidth=a,g.strokeStyle=b,g.stroke()),void 0)}),f.showList.push({type:LShape.RECT,arg:c})},drawArc:function(a,b,c,d,e){var f=this;f.setList.push(function(){var g=LGlobal.canvas;return g.beginPath(),c.length>6&&c[6]&&g.moveTo(c[0],c[1]),g.arc(c[0],c[1],c[2],c[3],c[4],c[5]),c.length>6&&c[6]&&g.lineTo(c[0],c[1]),f.bitmap?(g.save(),g.clip(),g.drawImage(f.bitmap.image,f.bitmap.x,f.bitmap.y,f.bitmap.width,f.bitmap.height,0,0,f.bitmap.width,f.bitmap.height),g.restore(),f.bitmap=null,void 0):(d&&(g.fillStyle=e,g.fill()),a>0&&(g.lineWidth=a,g.strokeStyle=b,g.stroke()),void 0)}),f.showList.push({type:LShape.ARC,arg:c})},drawRect:function(a,b,c,d,e){var f=this;f.setList.push(function(){var g=LGlobal.canvas;return g.beginPath(),g.rect(c[0],c[1],c[2],c[3]),g.closePath(),f.bitmap?(g.save(),g.clip(),g.drawImage(f.bitmap.image,f.bitmap.x,f.bitmap.y,f.bitmap.width,f.bitmap.height,0,0,f.bitmap.width,f.bitmap.height),g.restore(),f.bitmap=null,void 0):(d&&(g.fillStyle=e,g.fill()),a>0&&(g.lineWidth=a,g.strokeStyle=b,g.stroke()),void 0)}),f.showList.push({type:LShape.RECT,arg:c})},drawRoundRect:function(a,b,c,d,e){var f=this;f.setList.push(function(){var g=LGlobal.canvas;return g.beginPath(),g.moveTo(c[0]+c[4],c[1]),g.lineTo(c[0]+c[2]-c[4],c[1]),g.arcTo(c[0]+c[2],c[1],c[0]+c[2],c[1]+c[4],c[4]),g.lineTo(c[0]+c[2],c[1]+c[3]-c[4]),g.arcTo(c[0]+c[2],c[1]+c[3],c[0]+c[2]-c[4],c[1]+c[3],c[4]),g.lineTo(c[0]+c[4],c[1]+c[3]),g.arcTo(c[0],c[1]+c[3],c[0],c[1]+c[3]-c[4],c[4]),g.lineTo(c[0],c[1]+c[4]),g.arcTo(c[0],c[1],c[0]+c[4],c[1],c[4]),g.closePath(),f.bitmap?(g.save(),g.clip(),g.drawImage(f.bitmap.image,0,0,f.bitmap.width,f.bitmap.height,0,0,f.bitmap.width,f.bitmap.height),g.restore(),f.bitmap=null,void 0):(d&&(g.fillStyle=e,g.fill()),a>0&&(g.lineWidth=a,g.strokeStyle=b,g.stroke()),void 0)}),f.showList.push({type:LShape.RECT,arg:c})},drawVertices:function(a,b,c,d,e){var f=this;c.length<3||(f.setList.push(function(){var h,j,i,g=LGlobal.canvas;for(g.beginPath(),g.moveTo(c[0][0],c[0][1]),i=c.length,h=1;i>h;h++)j=c[h],g.lineTo(j[0],j[1]);return g.lineTo(c[0][0],c[0][1]),g.closePath(),f.bitmap?(g.save(),g.clip(),g.drawImage(f.bitmap.image,f.bitmap.x,f.bitmap.y,f.bitmap.width,f.bitmap.height,0,0,f.bitmap.width,f.bitmap.height),g.restore(),f.bitmap=null,void 0):(d&&(g.fillStyle=e,g.fill()),a>0&&(g.lineWidth=a,g.strokeStyle=b,g.closePath(),g.stroke()),void 0)}),f.showList.push({type:LShape.VERTICES,arg:c}))},drawTriangles:function(a,b,c,d,e){var g,h,j,f=this,i=b.length;f.setList.push(function(){var l,m,n,k,o,p,q,r,s,t;for(j=LGlobal.canvas,k=a,g=0,h=0;i>g;g+=3){if(l=0,j.save(),j.beginPath(),j.moveTo(k[2*b[g]],k[2*b[g]+1]),j.lineTo(k[2*b[g+1]],k[2*b[g+1]+1]),j.lineTo(k[2*b[g+2]],k[2*b[g+2]+1]),j.lineTo(k[2*b[g]],k[2*b[g]+1]),j.closePath(),d&&(j.lineWidth=d,j.strokeStyle=e,j.stroke()),j.clip(),0==g%6){if(n=-1,o=(c[2*b[g+1+h]]-c[2*b[g+h]])*f.bitmap.width,p=(c[2*b[g+2]+1]-c[2*b[g]+1])*f.bitmap.height,0==h&&0>o){for(m=g+9;i>m;m+=3)if(c[2*b[g+2]+1]==c[2*b[m+2]+1]){h=m-g;break}0==h&&(h=i-g),o=(c[2*b[g+1+h]]-c[2*b[g+h]])*f.bitmap.width}g+h>=i?(o=(c[2*b[g+h-i]]-c[2*b[g+1]])*f.bitmap.width,n=1==c[2*b[g]]?0:f.bitmap.width*c[2*b[g]]+o,n>f.bitmap.width&&(n-=f.bitmap.width)):n=f.bitmap.width*c[2*b[g+h]],sh=f.bitmap.height*c[2*b[g]+1],0>p&&(p=(c[2*b[g+2-(g>0?6:-6)]+1]-c[2*b[g-(g>0?6:-6)]+1])*f.bitmap.height,sh=0),q=(k[2*b[g+1]]-k[2*b[g]])/o,r=(k[2*b[g+1]+1]-k[2*b[g]+1])/o,s=(k[2*b[g+2]]-k[2*b[g]])/p,t=(k[2*b[g+2]+1]-k[2*b[g]+1])/p,j.transform(q,r,s,t,k[2*b[g]],k[2*b[g]+1]),j.drawImage(f.bitmap.image,f.bitmap.x+n,f.bitmap.y+sh,o,p,0,0,o,p)}else{if(o=(c[2*b[g+2+h]]-c[2*b[g+1+h]])*f.bitmap.width,p=(c[2*b[g+2]+1]-c[2*b[g]+1])*f.bitmap.height,0==h&&0>o){for(m=g+9;i>m;m+=3)if(c[2*b[g+2]+1]==c[2*b[m+2]+1]){h=m-g;break}0==h&&(h=i-g),o=(c[2*b[g+2+h]]-c[2*b[g+1+h]])*f.bitmap.width}g+1+h>=i?(o=(c[2*b[g+1+h-i]]-c[2*b[g+2]])*f.bitmap.width,n=1==c[2*b[g+1]]?0:f.bitmap.width*c[2*b[g+1]]+o,n>f.bitmap.width&&(n-=f.bitmap.width)):n=f.bitmap.width*c[2*b[g+1+h]],sh=f.bitmap.height*c[2*b[g]+1],0>p&&(p=(c[2*b[g+2-(g>0?6:-6)]+1]-c[2*b[g-(g>0?6:-6)]+1])*f.bitmap.height,sh=0),q=(k[2*b[g+2]]-k[2*b[g+1]])/o,r=(k[2*b[g+2]+1]-k[2*b[g+1]+1])/o,s=(k[2*b[g+2]]-k[2*b[g]])/p,t=(k[2*b[g+2]+1]-k[2*b[g]+1])/p,j.transform(q,r,s,t,k[2*b[g+1]],k[2*b[g+1]+1]),j.drawImage(f.bitmap.image,f.bitmap.x+n,f.bitmap.y+sh,o,p,0,-p,o,p)}j.restore()}})},drawLine:function(a,b,c){var d=this;d.setList.push(function(){var d=LGlobal.canvas;d.beginPath(),d.moveTo(c[0],c[1]),d.lineTo(c[2],c[3]),d.lineWidth=a,d.strokeStyle=b,d.closePath(),d.stroke()}),d.showList.push({type:LShape.LINE,arg:c})},add:function(a){this.setList.push(a)},ismouseon:function(a){var c=this;return null!=a&&a!=UNDEFINED&&0!=c.showList.length&&c.parent?c.parent.ismouseonShapes(c.showList,a.offsetX,a.offsetY):!1},getWidth:function(){var b,c,d,e,f,g,h,a=this;for(b=0,g=a.showList.length;g>b;b++)if(a.showList[b].type==LShape.RECT)(d>a.showList[b].arg[0]||typeof d==UNDEFINED)&&(d=a.showList[b].arg[0]),(e<a.showList[b].arg[0]+a.showList[b].arg[2]||typeof e==UNDEFINED)&&(e=a.showList[b].arg[0]+a.showList[b].arg[2]);else if(a.showList[b].type==LShape.ARC)(d>a.showList[b].arg[0]-a.showList[b].arg[2]||typeof d==UNDEFINED)&&(d=a.showList[b].arg[0]-a.showList[b].arg[2]),(e<a.showList[b].arg[0]+a.showList[b].arg[2]||typeof e==UNDEFINED)&&(e=a.showList[b].arg[0]+a.showList[b].arg[2]);else if(a.showList[b].type==LShape.VERTICES)for(c=0,h=a.showList[b].arg.length;h>c;c++)f=a.showList[b].arg[c],(d>f[0]||typeof d==UNDEFINED)&&(d=f[0]),(e<f[0]||typeof e==UNDEFINED)&&(e=f[0]);else a.showList[b].type==LShape.LINE?((d>a.showList[b].arg[0]||typeof d==UNDEFINED)&&(d=a.showList[b].arg[0]),(d>a.showList[b].arg[2]||typeof d==UNDEFINED)&&(d=a.showList[b].arg[2]),(e<a.showList[b].arg[0]||typeof e==UNDEFINED)&&(e=a.showList[b].arg[0]),(e<a.showList[b].arg[2]||typeof e==UNDEFINED)&&(e=a.showList[b].arg[2])):a.showList[b].type==LShape.POINT&&((d>a.showList[b].arg[0]||typeof d==UNDEFINED)&&(d=a.showList[b].arg[0]),(e<a.showList[b].arg[0]||typeof e==UNDEFINED)&&(e=a.showList[b].arg[0]));return typeof d==UNDEFINED&&(d=e=0),a.left=d,g>0&&e==d&&(e=d+1),e-d},getHeight:function(){var d,e,f,g,h,a=this,b=null,c=null;for(b=0,d=a.showList.length;d>b;b++)if(a.showList[b].type==LShape.RECT)(f>a.showList[b].arg[1]||typeof f==UNDEFINED)&&(f=a.showList[b].arg[1]),(g<a.showList[b].arg[1]+a.showList[b].arg[3]||typeof g==UNDEFINED)&&(g=a.showList[b].arg[1]+a.showList[b].arg[3]);else if(a.showList[b].type==LShape.ARC)(f>a.showList[b].arg[1]-a.showList[b].arg[2]||typeof f==UNDEFINED)&&(f=a.showList[b].arg[1]-a.showList[b].arg[2]),(g<a.showList[b].arg[1]+a.showList[b].arg[2]||typeof g==UNDEFINED)&&(g=a.showList[b].arg[1]+a.showList[b].arg[2]);else if(a.showList[b].type==LShape.VERTICES)for(c=0,e=a.showList[b].arg.length;e>c;c++)h=a.showList[b].arg[c],(f>h[1]||typeof f==UNDEFINED)&&(f=h[1]),(g<h[1]||typeof g==UNDEFINED)&&(g=h[1]);else a.showList[b].type==LShape.LINE?((f>a.showList[b].arg[1]||typeof f==UNDEFINED)&&(f=a.showList[b].arg[1]),(f>a.showList[b].arg[3]||typeof f==UNDEFINED)&&(f=a.showList[b].arg[3]),(g<a.showList[b].arg[1]||typeof g==UNDEFINED)&&(g=a.showList[b].arg[1]),(g<a.showList[b].arg[3]||typeof g==UNDEFINED)&&(g=a.showList[b].arg[3])):a.showList[b].type==LShape.POINT&&((f>a.showList[b].arg[1]||typeof f==UNDEFINED)&&(f=a.showList[b].arg[1]),(g<a.showList[b].arg[1]||typeof g==UNDEFINED)&&(g=a.showList[b].arg[1]));return typeof f==UNDEFINED&&(f=g=0),a.top=f,d>0&&g==f&&(g=f+1),g-f},startX:function(){var a=this;return a.getWidth(),a.left},startY:function(){var a=this;return a.getHeight(),a.top}};for(c in b)a.prototype[c]=b[c];return a}(),LShape=function(){function a(){var a=this;LExtends(a,LInteractiveObject,[]),a.type="LShape",a.graphics=new LGraphics,a.graphics.parent=a}var b,c;a.POINT="point",a.LINE="line",a.ARC="arc",a.RECT="rect",a.VERTICES="vertices",b={_ll_show:function(){var b=this;b.graphics.ll_show()},getWidth:function(a){var c,d,b=this,e=b.graphics.startX(),f=e+b.graphics.getWidth();return a&&b.mask&&(c=b.mask._startX?b.mask._startX():b.mask.startX(),d=b.mask.getWidth(),c>e&&(e=c),f>c+d&&(f=c+d)),b.ll_left=b.x+e,b.ll_right=b.x+f,(f-e)*b.scaleX},getHeight:function(a){var c,d,b=this,e=b.graphics.startY(),f=e+b.graphics.getHeight();return a&&b.mask&&(c=b.mask._startY?b.mask._startY():b.mask.startY(),d=b.mask.getHeight(),c>e&&(e=c),f>c+d&&(f=c+d)),b.ll_top=b.y+e,b.ll_bottom=b.y+f,(f-e)*b.scaleY},_startX:function(){var a=this;return a.getWidth(),a.ll_left},startX:function(){var a=this;return a._startX()*a.scaleX},_startY:function(){var a=this;return a.getHeight(),a.ll_top},startY:function(){var a=this;return a._startY()*a.scaleY},clone:function(){var b=this,c=new a;return c.copyProperty(b),c.graphics=b.graphics.clone(),c.graphics.parent=c,c},ismouseon:function(a,b){var e,c=this,d=!1;return c.visible&&null!=a?c.mask&&(c.mask.parent||(c.mask.parent=c.parent),!c.mask.ismouseon(a,b))?!1:(e={x:c.x*b.scaleX+b.x,y:c.y*b.scaleY+b.y,scaleX:b.scaleX*c.scaleX,scaleY:b.scaleY*c.scaleY},c.graphics&&(d=c.graphics.ismouseon(a,e)),d):!1},die:function(){var a=this;a.graphics.clear()}};for(c in b)a.prototype[c]=b[c];return a}(),LSprite=function(){function a(){var a=this;LExtends(a,LDisplayObjectContainer,[]),a.type="LSprite",a.rotatex,a.rotatey,a.graphics=new LGraphics,a.graphics.parent=a,a.box2dBody=null,a.shapes=new Array,a.dragRange=null,a.useCursor=null}var c,b={setRotate:function(a){var b=this;b.box2dBody?b.box2dBody.SetAngle(a):b.rotate=a},_rotateReady:function(){var a=this;a.box2dBody&&(typeof a.rotatex==UNDEFINED&&a.getRotateXY(),a.x=a.box2dBody.GetPosition().x*LGlobal.box2d.drawScale-a.parent.x-a.rotatex,a.y=a.box2dBody.GetPosition().y*LGlobal.box2d.drawScale-a.parent.y-a.rotatey,a.rotate=a.box2dBody.GetAngle())},_ll_show:function(){var b=this;b.graphics.ll_show(),LGlobal.show(b.childList),b._ll_debugShape()},startDrag:function(a){var b=this;b.ll_dragStart||(b.ll_touchPointID=a,b.ll_dragStartX=b.x,b.ll_dragStartY=b.y,b.ll_dragMX=mouseX,b.ll_dragMY=mouseY,b.ll_dragStart=!0,LGlobal.dragList.push(b))},stopDrag:function(){var b,c,a=this;for(b=0,c=LGlobal.dragList.length;c>b;b++)if(a.objectIndex==LGlobal.dragList[b].objectIndex){a.ll_dragStart=!1,LGlobal.dragList.splice(b,1);break}},getRotateXY:function(a,b){var c=this;a&&b||(a=c.getWidth(),b=c.getHeight()),c.rotatex=a/2,c.rotatey=b/2},getWidth:function(a){var c,d,e,f,g,h,i,b=this,j=b.graphics.startX(),k=j+b.graphics.getWidth();for(c=0,d=b.childList.length;d>c;c++)e=b.childList[c],typeof e.visible!=UNDEFINED&&e.visible&&(f=e.x,"function"==typeof e._startX&&(f=e._startX()),g=f+e.getWidth(a),j>f&&(j=f),g>k&&(k=g));return a&&b.mask&&(h=b.mask._startX?b.mask._startX():b.mask.startX(),i=b.mask.getWidth(),h>j&&(j=h),k>h+i&&(k=h+i)),b.ll_left=b.x+j,b.ll_right=b.x+k,(k-j)*b.scaleX},getHeight:function(a){var c,d,e,f,g,h,i,b=this,j=b.graphics.startY(),k=j+b.graphics.getHeight();for(c=0,d=b.childList.length;d>c;c++)e=b.childList[c],typeof e.visible!=UNDEFINED&&e.visible&&(f=e.y,"function"==typeof e._startY&&(f=e._startY()),g=f+e.getHeight(a),j>f&&(j=f),g>k&&(k=g));return a&&b.mask&&(h=b.mask._startY?b.mask._startY():b.mask.startY(),i=b.mask.getHeight(),h>j&&(j=h),k>h+i&&(k=h+i)),b.ll_top=b.y+j,b.ll_bottom=b.y+k,(k-j)*b.scaleY},_startX:function(){var a=this;return a.getWidth(),a.ll_left},startX:function(){var a=this;return a._startX()*a.scaleX},_startY:function(){var a=this;return a.getHeight(),a.ll_top},startY:function(){var a=this;return a._startY()*a.scaleY},_ll_loopframe:function(){this.dispatchEvent(LEvent.ENTER_FRAME)},clone:function(){var d,e,f,g,b=this,c=new a;for(c.copyProperty(b),c.graphics=b.graphics.clone(),c.graphics.parent=c,c.childList.length=0,f=0,g=b.childList.length;g>f;f++)d=b.childList[f],d.clone&&(e=d.clone(),e.parent=c,c.childList.push(e));return c},_mevent:function(a){var c,d,b=this;for(c=0;c<b.mouseList.length;c++)if(d=b.mouseList[c],d.type==a)return!0;return!1},ll_dispatchMouseEvent:function(a,b,d,e,f){var h,g=this;if(g.mouseEnabled)for(c=0;c<g.mouseList.length;c++)h=g.mouseList[c],h.type==a&&(b.selfX=(e-(g.x*d.scaleX+d.x))/(d.scaleX*g.scaleX),b.selfY=(f-(g.y*d.scaleY+d.y))/(d.scaleY*g.scaleY),b.currentTarget=b.clickTarget=g,b.target||(b.target=g),h.listener(b,g))},ll_mouseout:function(a,b,c,d,e){var g,f=this;if(b==LMouseEvent.MOUSE_MOVE&&f.ll_mousein&&(f.ll_mousein=!1,f._mevent(LMouseEvent.MOUSE_OUT)&&f.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OUT,a,c,d,e),f.mouseChildren))for(g=f.childList.length-1;g>=0;g--)f.childList[g].mouseEvent&&f.childList[g].ll_mouseout&&f.childList[g].ll_mouseout(a,b,c,d,e)},mouseEvent:function(a,b,c){if(!a)return!1;var e,f,i,j,d=this,g=a.offsetX,h=a.offsetY;if(!d.visible)return!1;if(null==c&&(c={x:0,y:0,scaleX:1,scaleY:1}),i=d.ismouseon(a,c)){if(LGlobal.os==OS_PC&&d.useCursor&&b==LMouseEvent.MOUSE_MOVE&&(LGlobal.cursor=d.useCursor),b!=LMouseEvent.MOUSE_MOVE||d.ll_mousein||(d.ll_mousein=!0,d._mevent(LMouseEvent.MOUSE_OVER)&&d.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OVER,a,c,g,h)),d.mouseChildren){for(j={x:d.x*c.scaleX+c.x,y:d.y*c.scaleY+c.y,scaleX:c.scaleX*d.scaleX,scaleY:c.scaleY*d.scaleY},f=d.childList.length-1;f>=0&&(!d.childList[f].mouseEvent||(e=d.childList[f].mouseEvent(a,b,j),!e||(a.target=d.childList[f],b==LMouseEvent.MOUSE_MOVE)));f--);d._mevent(b)&&d.ll_dispatchMouseEvent(b,a,c,g,h)}return!0}return d.ll_mouseout(a,b,c,g,h),!1},hitTestPoint:function(a,b){var c=this,d=c.shapes;return d&&0!=d.length||(c.getWidth(),c.getHeight(),d=[{type:LShape.RECT,arg:[c.ll_left-c.x,c.ll_top-c.y,c.ll_right-c.ll_left,c.ll_bottom-c.ll_top]}]),c.ismouseonShapes(d,a,b)},hitTestObject:function(a){var e,f,g,h,i,j,k,l,b=this,c=b.shapes,d=a.shapes;for(c&&0!=c.length||(b.getWidth(),b.getHeight(),c=[{type:LShape.RECT,arg:[b.ll_left-b.x,b.ll_top-b.y,b.ll_right-b.ll_left,b.ll_bottom-b.ll_top]}]),d&&0!=d.length||(a.getWidth(),a.getHeight(),d=[{type:LShape.RECT,arg:[a.ll_left-a.x,a.ll_top-a.y,a.ll_right-a.ll_left,a.ll_bottom-a.ll_top]}]),e=b.getRootMatrix(),f=a.getRootMatrix(),g=c.length-1;g>=0;g--)for(h=c[g],l=b._changeShape(h.type,h.arg,e),i=d.length-1;i>=0;i--)if(j=d[i],k=a._changeShape(j.type,j.arg,f),h.type==LShape.VERTICES||h.type==LShape.RECT){if(j.type==LShape.VERTICES||j.type==LShape.RECT){if(LGlobal.hitTestPolygon(l,k))return!0}else if(j.type==LShape.ARC&&LGlobal.hitTestPolygonArc(l,k))return!0}else if(j.type==LShape.VERTICES||j.type==LShape.RECT){if(LGlobal.hitTestPolygonArc(k,l))return!0}else if(j.type==LShape.ARC&&Math.sqrt((l[0]-k[0])*(l[0]-k[0])+(l[1]-k[1])*(l[1]-k[1]))<l[2]+k[2])return!0;return!1},addShape:function(a,b){var c=this;if(!(a==LShape.VERTICES&&b.length<3))return c.shapes.push({type:a,arg:b}),c.shapes},addShapes:function(a){var b=this;b.shapes=0==b.shapes.length?a:b.shapes.concat(a)},clearShape:function(){this.shapes=[]},_ll_debugShape:function(){var b,c,d,e,f,g,h,a=this;if(LGlobal.traceDebug&&0!=a.shapes.length)for(b=0,c=a.shapes.length;c>b;b++){if(d=a.shapes[b],e=LGlobal.canvas,f=d.arg,e.beginPath(),d.type==LShape.RECT)e.rect(f[0],f[1],f[2],f[3]);else if(d.type==LShape.ARC)e.arc(f[0],f[1],f[2],0,2*Math.PI);else if(d.type==LShape.VERTICES){for(e.moveTo(f[0][0],f[0][1]),g=1,h=f.length;h>g;g++)e.lineTo(f[g][0],f[g][1]);e.lineTo(f[0][0],f[0][1])}e.closePath(),e.strokeStyle="#00FF00",e.stroke()}},ismouseon:function(a,b){var d,e,f,g,c=this;if(!c.visible||null==a)return!1;if(c.mask&&(c.mask.parent||(c.mask.parent=c.parent),!c.mask.ismouseon(a,b)))return!1;if(c.shapes&&c.shapes.length>0)return c.ismouseonShapes(c.shapes,a.offsetX,a.offsetY);for(e=!1,f=c.childList,g={x:c.x*b.scaleX+b.x,y:c.y*b.scaleY+b.y,scaleX:b.scaleX*c.scaleX,scaleY:b.scaleY*c.scaleY},d=f.length-1;d>=0;d--)if(f[d].ismouseon&&(e=f[d].ismouseon(a,g)),e){a.target=c.childList[d];break}return e||(e=c.graphics.ismouseon(a,g)),e},die:function(){var b,c,d,a=this;for(a.graphics.clear(),a.removeAllEventListener(),a.stopDrag(),a.box2dBody&&a.clearBody(),b=0,c=a.childList,d=c.length;d>b;b++)c[b].die&&c[b].die()}};for(c in b)a.prototype[c]=b[c];return a}(),LButton=function(){function a(b,c,d,e){var f=this;LExtends(f,LSprite,[]),f.type="LButton",f.addChild(b),c?f.addChild(c):c=b,d?f.addChild(d):d=c,e?f.addChild(e):e=b,f.upState=f.bitmap_up=b,f.overState=f.bitmap_over=c,f.downState=d,f.disableState=e,f._ll_down_sx=f.downState.scaleX,f._ll_down_sy=f.downState.scaleY,f.overState.visible=!1,f.downState.visible=!1,f.upState.visible=!0,f.buttonMode=!0,f.staticMode=!1,f.setState(a.STATE_ENABLE),LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.pushButton(f),f.addEventListener(LMouseEvent.MOUSE_DOWN,f.ll_modeDown),f.setCursorEnabled(!0)}var b,c;a.STATE_DISABLE="disable",a.STATE_ENABLE="enable",b={setState:function(b){var c=this;if(b==a.STATE_DISABLE)c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0,c.mouseEnabled=!1;else{if(b!=a.STATE_ENABLE)return;c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!1,c.upState.visible=!0,c.mouseEnabled=!0}c.state=b},ll_mouseout:function(a){var f=this;f.ll_mousein&&(a.clickTarget=f,f.ll_modeOut(a),f.ll_mousein=!1)},mouseEvent:function(a,b){if(!a)return!1;var d=this;return b==LMouseEvent.MOUSE_MOVE&&d.ll_button_mode&&d.ll_button_mode(a),this.callParent("mouseEvent",arguments)},ll_button_mode:function(a){var b=this;b.visible&&(a.clickTarget=b,b.hitTestPoint(a.offsetX,a.offsetY)?b.ll_modeOver(a):b.ll_modeOut(a))},ll_modeDown:function(b){var d,e,f,g,h,i,j,k,l,c=b.clickTarget;if(c.buttonMode&&!c.tween){if(c.state==a.STATE_DISABLE)return c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0,void 0;c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!0,c._tweenOver=c.ll_modeOver,l=function(a){var b=a.parent;delete b.tween,b._tweenOver({clickTarget:b}),delete b._tweenOver},c.staticMode?c.tween=LTweenLiteTimeline.to(c.downState,.3,{}).to(c.downState,.1,{onComplete:l}):(d=c.downState.getWidth(),e=c.downState.getHeight(),f=1.1*d,g=1.1*e,h=c.downState.x,i=c.downState.y,j=h+.5*(d-f),k=i+.5*(e-g),c.tween=LTweenLiteTimeline.to(c.downState,.3,{x:j,y:k,scaleX:1.1*c._ll_down_sx,scaleY:1.1*c._ll_down_sy,ease:Quart.easeOut}).to(c.downState,.1,{x:h,y:i,scaleX:c._ll_down_sx,scaleY:c._ll_down_sy,ease:Quart.easeOut,onComplete:l}))}},ll_modeOver:function(b){var c=b.clickTarget;if(c.buttonMode){if(c.tween)return c._tweenOver=c.ll_modeOver,void 0;if(c.state==a.STATE_DISABLE)return c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0,void 0;c.upState.visible=!1,c.downState.visible=!1,c.overState.visible=!0}},ll_modeOut:function(b){var c=b.clickTarget;if(c.buttonMode){if(c.tween)return c._tweenOver=c.ll_modeOut,void 0;if(c.state==a.STATE_DISABLE)return c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0,void 0;c.overState.visible=!1,c.downState.visible=!1,c.upState.visible=!0}},setCursorEnabled:function(a){this.useCursor=a?"pointer":null},clone:function(){var b=this;return new a(b.upState.clone(),b.overState.clone(),b.downState.clone(),b.disableState.clone())},die:function(){var a=this;LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.removeButton(a),a.callParent("die",arguments)}};for(c in b)a.prototype[c]=b[c];return a}(),LBlendMode.SOURCE_OVER="source-over",LBlendMode.SOURCE_ATOP="source-atop",LBlendMode.SOURCE_IN="source-in",LBlendMode.SOURCE_OUT="source-out",LBlendMode.DESTINATION_OVER="destination-over",LBlendMode.DESTINATION_ATOP="destination-atop",LBlendMode.DESTINATION_IN="destination-in",LBlendMode.DESTINATION_OUT="destination-out",LBlendMode.LIGHTER="lighter",LBlendMode.COPY="copy",LBlendMode.XOR="xor",LBlendMode.NONE=null,LBlendMode.NORMAL=null,LTextFieldType=function(){throw"LTextFieldType cannot be instantiated"},LTextFieldType.INPUT="input",LTextFieldType.DYNAMIC=null,LStyleSheet=function(){function a(){var a=this;LExtends(a,LObject,[]),a.styleIndex=0,a.styleNames={}}return a.prototype.clone=function(){var a=this,b=new a.constructor;return b.copyProperty(a),b},a.prototype.setStyle=function(a,b){var d,e,c;if(this.styleIndex++,null===b)return this.styleNames[a]&&delete this.styleNames[a],void 0;for(c=b.replace(/(^\{)|(\}$)/g,"").split(";"),b={},d=0;d<c.length;d++)c[d]&&(e=c[d].split(":"),e[0]&&(b[e[0]]=e[1]));this.styleNames[a]=b},a.prototype.getStyle=function(a){return this.styleNames[a]},a}(),LTextFormat=function(){function a(a,b,c,d,e,f){var g=this;LExtends(g,LObject,[]),g.font=a?a:"Arial",g.size=b?b:15,g.color=c?c:"#000000",g.bold=d?d:!1,g.italic=e?e:!1,g.underline=f?f:!1}return a.prototype.clone=function(){var a=this,b=new a.constructor;return b.copyProperty(a),b},a.prototype.getFontText=function(){var a=this;return(a.italic?"italic ":"")+(a.bold?"bold ":"")+a.size+"px "+a.font},a.prototype.setCss=function(a){var c,b=this;for(c in a)switch(c){case"color":b.color=a[c];break;case"font-family":b.font=a[c];break;case"font-size":b.size=a[c];break;case"font-style":b.italic="italic"==a[c];break;case"font-weight":b.bold="bold"==a[c];break;case"text-decoration":b.color="underline"==a[c]}},a}(),LTextField=function(){function a(){var b=this;LExtends(b,LInteractiveObject,[]),b.type="LTextField",b.texttype=null,b.text="",b.htmlText="",b.styleSheet="",b.font="Arial",b.size=15,b.color="#000000",b.weight="normal",b.textAlign="left",b.textBaseline="top",b.heightMode=a.HEIGHT_MODE_BOTTOM,b.stroke=!1,b.lineWidth=1,b.lineColor="#000000",b.width=150,b.height=b.size,b.displayAsPassword=!1,b.wordWrap=!1,b.multiline=!1,b.numLines=1,b.speed=0,b._speedIndex=100}var b,c;a.HEIGHT_MODE_BOTTOM="bottom",a.HEIGHT_MODE_BASELINE="baseline",b={_showReady:function(a){var b=this;a.font=b.weight+" "+b.size+"px "+b.font,a.textAlign=b.textAlign,a.textBaseline=b.textBaseline},ll_getStyleSheet:function(a,b,c,d){var f,h,i,j,e=this,g=a.clone();if("font"==b)for(h=0;c&&!(h++>4)&&(f=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g,i=f.exec(c),i&&i[0]);){switch(i[2]){case"face":g.font=i[6];break;case"color":g.color=i[6];break;case"size":g.size=i[6]}c=c.replace(i[0],"").replace(/(^\s*)|(\s*$)|(\n)/g,"")}else if("b"==b)g.bold=!0;else if("u"==b)g.underline=!0;else if("i"==b)g.italic=!0;else if("p"==b&&e.wordWrap)d="\n"+d+"\n";else if(e.styleSheet){if("span"==b){if(f=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g,i=f.exec(c),i&&i[0])switch(i[2]){case"class":j=e.styleSheet.getStyle("."+i[6])}}else e.styleSheet.getStyle(b)&&(j=e.styleSheet.getStyle(b));j&&g.setCss(j)}e.ll_getHtmlText(g,d)},ll_getHtmlText:function(a,b){if(b){var d,e,f,g,c=this,h=/<(.*?)(\s*)(.*?)>(.*?)<\/\1>/g,i=h.exec(b);if(!i||!i[0])return c.ll_htmlTexts.push({textFormat:a.clone(),text:b}),void 0;i.index>0&&c.ll_htmlTexts.push({textFormat:a.clone(),text:b.substring(0,i.index)}),d=i[1],f=i.index,g=f;do g=b.indexOf("</"+d,g+1),f=b.indexOf("<"+d,f+1);while(f>0&&g>f);e=b.substring(b.indexOf(">",i.index)+1,g),c.ll_getStyleSheet(a,d,i[3],e),c.ll_getHtmlText(a,b.substring(g+d.length+3))}},_ll_show:function(b){var e,f,g,h,i,j,k,l,m,n,o,p,c=this;if(c.texttype!=LTextFieldType.INPUT||(c.inputBackLayer.ll_show(),g=c.getRootCoordinate(),LGlobal.inputBox.name=="input"+c.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((g.y+c.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((g.x+c.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px"),!LGlobal.inputTextField||LGlobal.inputTextField.objectIndex!=c.objectIndex)){if(LGlobal.fpsStatus&&LGlobal.fpsStatus.text++,b.fillStyle=c.color,c.stroke&&(b.strokeStyle=c.lineColor,b.lineWidth=c.lineWidth+1),c.htmlText)return(c.ll_htmlText!=c.htmlText||c.styleSheet&&(c.ll_style_objectIndex!=c.styleSheet.objectIndex||c.ll_styleIndex==c.styleSheet.styleIndex))&&(o=new LTextFormat,c.ll_htmlTexts=[],c.ll_htmlText=c.htmlText,c.styleSheet&&(c.ll_style_objectIndex=c.styleSheet.objectIndex,c.ll_styleIndex=c.styleSheet.styleIndex),c.ll_getHtmlText(o,c.htmlText)),h=0,j=0,k=0,l=0,c._wordHeight=c.wordHeight||30,a.underlineY||(a.underlineY={alphabetic:0,top:1,bottom:-.2,middle:.4,hanging:.8}),c.ll_htmlTexts.forEach(function(d){var e=d.textFormat,g=d.text;for(b.font=e.getFontText(),b.fillStyle=e.color,f=0,i=g.length;i>f;f++)n=/(?:\r\n|\r|\n|ﾂ･n)/.exec(g.substr(f,1)),n?(h=0,j=f+1,k++):(m=1.2*b.measureText("O").width,c.stroke&&b.strokeText(g.substr(f,1),h,k*c._wordHeight),b.fillText(g.substr(f,1),h,k*c._wordHeight),e.underline&&(b.beginPath(),p=k*c._wordHeight+m*a.underlineY[c.textBaseline],b.moveTo(h,p),b.lineTo(h+b.measureText(g.substr(f,1)).width,p),b.stroke())),h+=b.measureText(g.substr(f,1)).width,c.wordWrap&&h+b.measureText(g.substr(f+1,1)).width>c.width&&(h=0,j=f+1,k++);c.height=(k+1)*c._wordHeight}),void 0;if(e=c.text,c.displayAsPassword)for(e="",f=0,i=c.text.length;i>f;f++)e+="*";if(c.wordWrap||c.multiline){for(h=0,j=0,k=0,l=0,f=0,i=c.text.length;i>f;f++)n=/(?:\r\n|\r|\n|ﾂ･n)/.exec(e.substr(f,1)),n?(h=0,j=f+1,k++):(c.stroke&&b.strokeText(e.substr(f,1),h,k*c.wordHeight),b.fillText(e.substr(f,1),h,k*c.wordHeight)),c.numLines=k,h=b.measureText(c.text.substr(j,f+1-j)).width,c.wordWrap&&h+b.measureText(e.substr(f,1)).width>c.width&&(h=0,j=f+1,k++);c.height=(k+1)*c.wordHeight}else c.numLines=1,c.stroke&&b.strokeText(e,0,0,b.measureText(e).width),b.fillText(e,0,0,b.measureText(e).width);c.windRunning&&c._ll_windRun()}},_wordHeight:function(a){var b=this;a>0?b.wordHeight=a:(b.wordWrap=!1,b.wordHeight=b.getHeight()),b.height=0},setMultiline:function(a,b){var c=this;a&&c._wordHeight(b),c.multiline=a},setWordWrap:function(a,b){var c=this;a&&c._wordHeight(b),c.wordWrap=a},setType:function(a,b){var c=this;c.texttype!=a&&a==LTextFieldType.INPUT?(null==b||"LSprite"!=b.type?(c.inputBackLayer=new LSprite,c.inputBackLayer.graphics.drawRect(1,"#000000",[0,.4*-c.getHeight(),c.width,1.5*c.getHeight()])):c.inputBackLayer=b,c.inputBackLayer.parent=c,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.pushInputBox(c)):(c.inputBackLayer=null,LMouseEventContainer.removeInputBox(c)),c.texttype=a},ismouseon:function(a,b){var c=this;return a?c.visible?(b||(b={x:0,y:0,scaleX:1,scaleY:1}),c.mask&&(c.mask.parent||(c.mask.parent=c.parent),!c.mask.ismouseon(a,b))?!1:c.inputBackLayer?c.inputBackLayer.ismouseon(a,{x:c.x*b.scaleX+b.x,y:c.y*b.scaleY+b.y,scaleX:b.scaleX*c.scaleX,scaleY:b.scaleY*c.scaleY}):c.ismouseonShapes([{type:LShape.RECT,arg:[0,0,c._getWidth(),c._getHeight()]}],a.offsetX,a.offsetY)):!1:!1},clone:function(){var a=this,b=new a.constructor;return b.copyProperty(a),b.texttype=null,a.texttype==LTextFieldType.INPUT&&b.setType(LTextFieldType.INPUT),b},mouseEvent:function(a,b,c){var e,d=this;null!=d.inputBackLayer&&b==LMouseEvent.MOUSE_DOWN&&(e=d.ismouseon(a,c),e&&d.focus())},_ll_getValue:function(){LGlobal.inputBox.style.display!=NONE&&(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),LGlobal.inputTextField=null)},updateInput:function(){var a=this;a.texttype==LTextFieldType.INPUT&&LGlobal.inputTextField.objectIndex==a.objectIndex&&(LGlobal.inputTextBox.value=LGlobal.inputTextField.text)},_ll_input:function(a){var b=new LEvent(LTextEvent.TEXT_INPUT);b.keyCode=a.keyCode,LGlobal.inputTextField.text=LGlobal.inputTextBox.value,a.returnValue=LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)?LGlobal.inputTextField.dispatchEvent(b):!0},focus:function(){var b,c,a=this;a.parent&&a.texttype==LTextFieldType.INPUT&&(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=a.objectIndex&&a._ll_getValue(),a.dispatchEvent(LFocusEvent.FOCUS_IN),b=a.getAbsoluteScale(),LGlobal.inputBox.style.display="",LGlobal.inputBox.name="input"+a.objectIndex,LGlobal.inputTextField=a,LGlobal.inputTextareaBoxObj.style.display=NONE,LGlobal.inputTextBoxObj.style.display=NONE,LGlobal.passwordBoxObj.style.display=NONE,LGlobal.inputTextBox=a.displayAsPassword?LGlobal.passwordBoxObj:a.multiline?LGlobal.inputTextareaBoxObj:LGlobal.inputTextBoxObj,c=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height,LGlobal.inputTextBox.style.display="",LGlobal.inputTextBox.value=a.text,LGlobal.inputTextBox.style.height=a.inputBackLayer.getHeight()*b.scaleY*a.scaleY*sy+"px",LGlobal.inputTextBox.style.width=a.inputBackLayer.getWidth()*b.scaleX*a.scaleX*c+"px",LGlobal.inputTextBox.style.color=a.color,LGlobal.inputTextBox.style.fontSize=(a.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px",LGlobal.inputTextBox.style.fontFamily=a.font,LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),a.texttype==LTextFieldType.INPUT&&(rc=a.getRootCoordinate(),LGlobal.inputBox.name=="input"+a.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+a.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+a.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")),setTimeout(function(){LGlobal.inputTextBox.focus()},0))},_getWidth:function(){var a=this;return a.wordWrap?a.width:(LGlobal.canvas.font=a.size+"px "+a.font,LGlobal.canvas.measureText(a.text).width)},getWidth:function(a){var c,d,e,b=this;return c=b._getWidth()*b.scaleX,a&&b.mask?(d=b.mask._startX?b.mask._startX():b.mask.startX(),d>c?0:(e=b.mask.getWidth(),d+e>c?c-d:e)):c},_getHeight:function(){var d,e,f,g,h,i,b=this,c=LGlobal.canvas;if(b.wordWrap){if(c.font=b.weight+" "+b.size+"px "+b.font,0==b.height){for(f=0,g=0,h=0,d=0,e=b.text.length;e>d;d++)f=c.measureText(b.text.substr(g,d-g)).width,i=/(?:\r\n|\r|\n|ﾂ･n)/.exec(b.text.substr(d,1)),(b.wordWrap&&f>b.width||i)&&(f=0,g=d,h++,i&&g++);b.height=(h+1)*b.wordHeight}return b.height}return c.font=b.weight+" "+b.size+"px "+b.font,e=1.2*c.measureText("O").width,b.heightMode==a.HEIGHT_MODE_BASELINE&&(e=1.2*e),e},getHeight:function(a){var c,d,e,b=this;return c=b._getHeight()*b.scaleY,a&&b.mask?(d=b.mask._startY?b.mask._startY():b.mask.startY(),d>c?0:(e=b.mask.getHeight(),d+e>c?c-d:e)):c},wind:function(a){var b=this;b.wind_over_function=a,b.windRunning=!0,b._ll_wind_text=b.text,b.text="",b._ll_wind_length=0},_ll_windRun:function(){var a=this;if(!(a._speedIndex++<a.speed)){if(a._speedIndex=0,a._ll_wind_length>a._ll_wind_text.length)return a.windRunning=!1,a.wind_over_function&&a.wind_over_function(),a.dispatchEvent(new LEvent(LTextEvent.WIND_COMPLETE)),void 0;a.text=a._ll_wind_text.substring(0,a._ll_wind_length),a._ll_wind_length++}},die:function(){LMouseEventContainer.removeInputBox(this)}};for(c in b)a.prototype[c]=b[c];return a}(),LBitmap=function(){function a(a){var b=this;LExtends(b,LDisplayObject,[]),b.type="LBitmap",b.rotateCenter=!0,b.bitmapData=a,b.bitmapData&&(b.width=b.bitmapData.width,b.height=b.bitmapData.height)}var c,b={_canShow:function(){return this.visible&&this.bitmapData},_rotateReady:function(){var a=this;0!=a.rotate&&a.rotateCenter?(a.rotatex=.5*a.getWidth(),a.rotatey=.5*a.getHeight()):a.rotatex=a.rotatey=0
},_coordinate:function(){},_ll_show:function(){this.ll_draw()},ll_draw:function(){var a=this;LGlobal.fpsStatus&&LGlobal.fpsStatus.bitmapData++,LGlobal.canvas.drawImage(a.bitmapData.image,a.bitmapData.x,a.bitmapData.y,a.bitmapData.width,a.bitmapData.height,a.x,a.y,a.bitmapData.width,a.bitmapData.height)},clone:function(){var b=this,c=new a(b.bitmapData.clone());return c.copyProperty(b),c.rotateCenter=b.rotateCenter,c},ismouseon:function(a,b){var c=this;return a?c.visible&&c.bitmapData?c.mask&&(c.mask.parent||(c.mask.parent=c.parent),!c.mask.ismouseon(a,b))?!1:c.ismouseonShapes([{type:LShape.RECT,arg:[0,0,c.bitmapData.width,c.bitmapData.height]}],a.offsetX,a.offsetY):!1:!1},getWidth:function(a){var c,d,e,b=this;return c=null!=b.bitmapData?b.bitmapData.width*(b.scaleX>0?b.scaleX:-b.scaleX):0,a&&b.mask?(d=b.mask._startX?b.mask._startX():b.mask.startX(),d>c?0:(e=b.mask.getWidth(),d+e>c?c-d:e)):c},getHeight:function(a){var c,d,e,b=this;return c=null!=b.bitmapData?b.bitmapData.height*(b.scaleY>0?b.scaleY:-b.scaleY):0,a&&b.mask?(d=b.mask._startY?b.mask._startY():b.mask.startY(),d>c?0:(e=b.mask.getHeight(),d+e>c?c-d:e)):c},startX:function(){return this.x},startY:function(){return this.y},die:function(){}};for(c in b)a.prototype[c]=b[c];return a}(),LBitmapData=function(){function a(b,c,d,e,f,g){var i,j,h=this;if(LExtends(h,LObject,[]),h.type="LBitmapData",typeof g==UNDEFINED&&(g=a.DATA_IMAGE),h.oncomplete=null,h._locked=!1,h._setPixel=!1,h.x=null==c?0:c,h.y=null==d?0:d,h.width=0,h.height=0,h.dataType=null,b&&"object"==typeof b)h.image=b,h.dataType=a.DATA_IMAGE,h.width=null==e?h.image.width:e,h.height=null==f?h.image.height:f,h._setDataType(g);else{if(h._createCanvas(),h.dataType=a.DATA_CANVAS,h._canvas.width=h.width=null==e?1:e,h._canvas.height=h.height=null==f?1:f,"string"==typeof b&&(b=parseInt(b.replace("#","0x"))),"number"==typeof b){for(i=h._context.createImageData(h.width,h.height),j=0;j<i.data.length;j+=4)i.data[j+0]=255&b>>16,i.data[j+1]=255&b>>8,i.data[j+2]=255&b,i.data[j+3]=255;h._context.putImageData(i,0,0)}h.image=h._canvas,g==a.DATA_IMAGE&&h._setDataType(g)}h.resize()}var b,c;a.DATA_IMAGE="data_image",a.DATA_CANVAS="data_canvas",b={_setDataType:function(b){var c=this;c.dataType!=b&&(b==a.DATA_CANVAS?(c._createCanvas(),c._canvas.width=c.image.width,c._canvas.height=c.image.height,c._context.clearRect(0,0,c._canvas.width,c._canvas.height),c._context.drawImage(c.image,0,0),c.image=c._canvas):b==a.DATA_IMAGE&&(c.image=new Image,c.image.width=c._canvas.width,c.image.height=c._canvas.height,c.image.src=c._canvas.toDataURL()),c.dataType=b)},_createCanvas:function(){var a=this;a._canvas||(a._canvas=document.createElement("canvas"),a._context=a._canvas.getContext("2d"))},clear:function(){var b=this;b._createCanvas(),b._canvas.width=b.image.width,b.dataType==a.DATA_IMAGE&&(b.image.src=b._canvas.toDataURL())},setProperties:function(a,b,c,d){var e=this;e.x=a,e.y=b,e.width=c,e.height=d,e.resize()},setCoordinate:function(a,b){var c=this;c.x=a,c.y=b,c.resize()},clone:function(){var b=this;return new a(b.image,b.x,b.y,b.width,b.height,b.dataType)},_ready:function(){var b=this;b._dataType=b.dataType,b._setDataType(a.DATA_CANVAS),b._data=b._context.getImageData(b.x,b.y,b.width,b.height)},_update:function(){var a=this;a._context.putImageData(a._data,a.x,a.y,0,0,a.width,a.height),a._setDataType(a._dataType),a._data=null},getPixel:function(a,b,c){var e,f,d=this;return a>>=0,b>>=0,d._locked||d._ready(),e=4*d.width*b+4*a,f=d._data.data,d._locked||d._update(),"number"==c?f[e]<<16|f[e+1]<<8|f[e+2]:[f[e],f[e+1],f[e+2],f[e+3]]},setPixel:function(a,b,c){var e,f,d=this;a>>=0,b>>=0,d._locked||d._ready(),e=d._data,f=4*d.width*b+4*a,"object"==typeof c?(e.data[f+0]=c[0],e.data[f+1]=c[1],e.data[f+2]=c[2],e.data[f+3]=c[3]):("string"==typeof c&&(c=parseInt(c.replace("#","0x"))),e.data[f+0]=255&c>>16,e.data[f+1]=255&c>>8,e.data[f+2]=255&c,e.data[f+3]=255),d._locked||d._update()},getPixels:function(a){var c,b=this;return b._locked||b._ready(),c=b._context.getImageData(b.x+a.x,b.y+a.y,a.width,a.height),b._locked||b._update(),c},setPixels:function(a,b){var d,e,f,g,i,j,c=this;if(c._locked||c._ready(),f=c._data,"object"==typeof b)for(g=c._canvas.width,i=a.x;i<a.right;i++)for(j=a.y;j<a.bottom;j++)d=4*g*(c.y+j)+4*(c.x+i),e=4*b.width*(j-a.y)+4*(i-a.x),f.data[d+0]=b.data[e+0],f.data[d+1]=b.data[e+1],f.data[d+2]=b.data[e+2],f.data[d+3]=b.data[e+3];else for("string"==typeof b&&(b=parseInt(b.replace("#","0x"))),b=[255&b>>16,255&b>>8,255&b],g=c._canvas.width,i=a.x;i<a.right;i++)for(j=a.y;j<a.bottom;j++)d=4*g*(c.y+j)+4*(c.x+i),f.data[d+0]=b[0],f.data[d+1]=b[1],f.data[d+2]=b[2],f.data[d+3]=255;c._locked||c._update()},putPixels:function(b,c){var d=this;d.dataType==a.DATA_CANVAS&&"object"==typeof c&&d._context.putImageData(c,d.x+b.x,d.y+b.y,0,0,b.width,b.height)},lock:function(){var a=this;a._locked=!0,a._ready()},unlock:function(){var a=this;a._locked=!1,a._update()},draw:function(b,c,d,e,f){var h,j,k,l,m,g=this,i=b,n=!1,o=g.dataType;return g._setDataType(a.DATA_CANVAS),(c||d||e||f)&&(g._context.save(),n=!0),f&&(i instanceof a?(j=i.x,k=i.y):j=k=0,i=new a(i.getDataCanvas(),j+f.x,k+f.y,f.width,f.height,a.DATA_CANVAS)),l=i.getWidth()>>>0,m=i.getHeight()>>>0,0==l||0==m?(g._setDataType(o),void 0):(h=i.getDataCanvas(),d&&(i.colorTransform(new LRectangle(0,0,l,m),d),h=i.image),c&&g._context.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),e&&(g._context.globalCompositeOperation=e),g._context.drawImage(h,i.x,i.y,l,m,0,0,l,m),n&&g._context.restore(),g._setDataType(o),g.resize(),void 0)},getDataCanvas:function(){var b=this,c=b.dataType;return b._setDataType(a.DATA_CANVAS),b._setDataType(c),b._canvas},getWidth:function(){return this.width},getHeight:function(){return this.height},resize:function(){var a=this,b=a.image.width-a.x,c=a.image.height-a.y;a.width=a.width<b?a.width:b,a.height=a.height<c?a.height:c},colorTransform:function(b,c){var i,j,k,l,m,n,o,p,d=this;if(d.dataType==a.DATA_CANVAS){for(b.x>>0,b.y>>0,b.width>>0,b.height>>0,i=d._context.getImageData(d.x+b.x,d.y+b.y,b.width,b.height),j=i.data,k=0,l=j.length;l>k;k+=4)m=k,n=k+1,o=k+2,p=k+3,j[m]=j[m]*c.redMultiplier+c.redOffset,j[n]=j[n]*c.greenMultiplier+c.greenOffset,j[o]=j[o]*c.blueMultiplier+c.blueOffset,j[p]=j[p]*c.alphaMultiplier+c.alphaOffset;d._context.putImageData(i,d.x+b.x,d.y+b.y,0,0,b.width,b.height)}},copyPixels:function(b,c,d){var f,g,h,i,e=this,j=b;e.dataType==a.DATA_CANVAS&&(f=j.x,g=j.y,h=j.width,i=j.height,j.setProperties(c.x+j.x,c.y+j.y,c.width,c.height),e._context.drawImage(j.image,j.x,j.y,j.width,j.height,d.x,d.y,j.width,j.height),j.x=f,j.y=g,j.width=h,j.height=i)}};for(c in b)a.prototype[c]=b[c];return a}(),LDropShadowFilter=function(){function a(a,b,c,d){var e=this;LExtends(e,LObject,[]),e.type="LDropShadowFilter",e.distance=a?a:0,e.angle=b?b:0,e.shadowColor=c?c:"#000000",e.shadowBlur=d?d:20,e.setShadowOffset()}var c,b={setShadowOffset:function(){var a=this,b=a.angle*Math.PI/180;a.shadowOffsetX=a.distance*Math.cos(b),a.shadowOffsetY=a.distance*Math.sin(b)},ll_show:function(){var a=this,b=LGlobal.canvas;b.shadowColor=a.shadowColor,b.shadowBlur=a.shadowBlur,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY},setDistance:function(a){this.distance=a,this.setShadowOffset()},setAngle:function(a){this.angle=a,this.setShadowOffset()},setColor:function(a){this.shadowColor=a},setBlur:function(a){this.shadowBlur=a}};for(c in b)a.prototype[c]=b[c];return a}(),LAnimation=function(){function a(a,b,c){var d=this;LExtends(d,LSprite,[]),d.type="LAnimation",d.rowIndex=0,d.colIndex=0,d._ll_stepIndex=0,d._ll_stepArray=[],d.mode=1,d.isMirror=!1,d.bitmapList=Array.isArray(b)?b:[b],d.bitmap=new LBitmap(d.bitmapList[0]),d.imageArray=c,d.addChild(d.bitmap),null!=a&&a.addChild(d),d.onframe(),d.colIndex=0}var c,b={setAction:function(a,b,c,d){var e=this,f=!1;null!=a&&a>=0&&a<e.imageArray.length&&(e.rowIndex=a,f=!0),null!=b&&b>=0&&b<e.imageArray[a].length&&(e.colIndex=b,f=!0),null!=c&&(e.mode=c,f=!0),null!=d&&(e.isMirror=d,e.isMirror?(e.bitmap.x=e.bitmap.getWidth(),e.bitmap.scaleX=-1*Math.abs(e.bitmap.scaleX)):(e.bitmap.x=0,e.bitmap.scaleX=Math.abs(e.bitmap.scaleX)),f=!0),f&&(e._ll_stepIndex=0,e._send_complete=!1)},getAction:function(){var a=this;return[a.rowIndex,a.colIndex,a.mode,a.isMirror]},onframe:function(){var b,a=this,c=0,d=null;if(a.colIndex>=a.imageArray[a.rowIndex].length&&(a.colIndex=0),b=a.imageArray[a.rowIndex][a.colIndex],d=a._ll_stepArray[a.rowIndex]&&a._ll_stepArray[a.rowIndex][a.colIndex]?a._ll_stepArray[a.rowIndex][a.colIndex]:0,0==a._ll_stepIndex){if("number"==typeof b.dataIndex&&Array.isArray(a.bitmapList)&&b.dataIndex<a.bitmapList.length&&(a.bitmap.bitmapData=a.bitmapList[b.dataIndex]),b.script)for(i=0;i<b.script.length;i++)obj=b.script[i],l=a.ll_labelList[obj.name],l&&l.rowIndex==a.rowIndex&&l.colIndex==a.colIndex&&l.mode==a.mode&&l.isMirror==(-1==a.bitmap.scaleX)&&obj.func(a,obj.params);typeof b.width!=UNDEFINED&&typeof b.height!=UNDEFINED?a.bitmap.bitmapData.setProperties(b.x,b.y,b.width,b.height):a.bitmap.bitmapData.setCoordinate(b.x,b.y),typeof b.sx!=UNDEFINED&&(c=b.sx),typeof b.sy!=UNDEFINED&&(a.bitmap.y=b.sy),typeof b.mirror!=UNDEFINED&&(a.bitmap.rotateCenter=!1,a.bitmap.scaleX=b.mirror?-1:1),a.bitmap.x=c+(1==a.bitmap.scaleX?0:a.bitmap.getWidth())}a._ll_stepIndex++<d||(a._ll_stepIndex=0,a.colIndex+=a.mode,(a.colIndex>=a.imageArray[a.rowIndex].length||a.colIndex<0)&&(a.colIndex=a.mode>0?0:a.imageArray[a.rowIndex].length-1,"LAnimationTimeline"==a.constructor.name?a._send_complete=!0:a.dispatchEvent(LEvent.COMPLETE)))},clone:function(){var a=this,b=new a.constructor(null,a.bitmapList,a.imageArray.slice(0));return b.copyProperty(a),b.childList.length=0,b.bitmap=a.bitmap.clone(),b.addChild(b.bitmap),b}};for(c in b)a.prototype[c]=b[c];return a}(),LAnimationTimeline=function(){function a(a,b){var e,f,g,d,c=this;for(LExtends(c,LAnimation,[null,a,b]),c.type="LAnimationTimeline",c.speed=0,c._speedIndex=0,c.ll_labelList={},d=0;d<b.length;d++)for(e=b[d],f=0;f<e.length;f++)g=e[f],g.label&&c.setLabel(g.label,d,f,1,g.isMirror?!0:!1);c.addEventListener(LEvent.ENTER_FRAME,c._ll_onframe)}var c,b={clone:function(){var b,c,a=this,d=new a.constructor(a.bitmapList,a.imageArray.slice(0));d.copyProperty(a),d.childList.length=0,d.bitmap=a.bitmap.clone(),d.addChild(d.bitmap);for(b in a.ll_labelList)c=a.ll_labelList[b],d.ll_labelList[b]={rowIndex:c.rowIndex,colIndex:c.colIndex,mode:c.mode,isMirror:c.isMirror};return d},setFrameSpeedAt:function(a,b,c){var d=this;d._ll_stepArray[a]||(d._ll_stepArray[a]=[]),d._ll_stepArray[a][b]=c},_ll_onframe:function(a){var b=a.target;b._ll_stop||b._speedIndex++<b.speed||b._send_complete&&(b.dispatchEvent(LEvent.COMPLETE),b._send_complete=!1,b._ll_stop)||(b._speedIndex=0,b.onframe())},setLabel:function(a,b,c,d,e){this.ll_labelList[a]={rowIndex:b,colIndex:c,mode:typeof d==UNDEFINED?1:d,isMirror:typeof e==UNDEFINED?!1:e}},play:function(){this._ll_stop=!1},stop:function(){this._ll_stop=!0},gotoAndPlay:function(a){var b=this,c=b.ll_labelList[a];b.setAction(c.rowIndex,c.colIndex,c.mode,c.isMirror),b.onframe(),b.play()},gotoAndStop:function(a){var b=this,c=b.ll_labelList[a];b.setAction(c.rowIndex,c.colIndex,c.mode,c.isMirror),b.onframe(),b.stop()},addFrameScript:function(a,b,c){var d=this.ll_labelList[a],e=this.imageArray[d.rowIndex][d.colIndex];e.script||(e.script=[]),e.script.push({func:b,params:c,name:a})},removeFrameScript:function(a){var c,d,e,b=this.ll_labelList[a];if(d=this.imageArray[b.rowIndex][b.colIndex].script)for(e=0;e<d.length;e++)if(c=d[e],c.name==a){d.splice(e,1);break}}};for(c in b)a.prototype[c]=b[c];return a}(),LLoadManage=function(){function a(){this.llname="ll.file.",this.llload="ll.load."}return a.prototype={load:function(a,b,c){var d=this;return a&&0!=a.length?(d.list=a,d.onupdate=b,d.oncomplete=c,d.loader=d,d.index=0,d.loadIndex=0,d.result=[],d.lresult=[],d.loadInit(),void 0):(c([]),void 0)},loadInit:function(){var a=this;a.index>=a.list.length||(a.loadIndex=0,a.loadStart(),a.reloadtime=setTimeout(a.loadInit.bind(a),1e4))},loadStart:function(){var b,e,a=this;a.loadIndex>=a.list.length||(b=a.list[a.loadIndex],b.name||(b.name=a.llname+a.loadIndex),a.lresult[a.llload+b.name]||(b["type"]||(e=getExtension(b.path),"txt"==e?b["type"]=LURLLoader.TYPE_TEXT:"js"==e?b["type"]=LURLLoader.TYPE_JS:new Array("mp3","ogg","wav","m4a").indexOf(e)>=0&&(b["type"]=LSound.TYPE_SOUND)),b["type"]==LURLLoader.TYPE_TEXT||b["type"]==LURLLoader.TYPE_JS?(a.loader=new LURLLoader,a.loader.name=b.name,a.loader.addEventListener(LEvent.COMPLETE,a.loadComplete.bind(a)),a.loader.load(a.url(b.path),b["type"])):b["type"]==LSound.TYPE_SOUND?(a.loader=new LSound,a.loader.name=b.name,a.loader.addEventListener(LEvent.COMPLETE,a.loadComplete.bind(a)),a.loader.load(b.path)):(a.loader=new LLoader,a.loader.name=b.name,a.loader.addEventListener(LEvent.COMPLETE,a.loadComplete.bind(a)),a.loader.load(a.url(b.path),LLoader.TYPE_BITMAPDATE))),a.loadIndex++,a.loadStart())},loadComplete:function(a){var c,b=this;if(a&&a.currentTarget&&a.currentTarget.name){if(a.currentTarget.removeEventListener(LEvent.COMPLETE,b.loadComplete),a.currentTarget.name.indexOf(b.llname)>=0&&(a.target=1),b.lresult[b.llload+a.currentTarget.name])return;b.result[a.currentTarget.name]=a.target,b.lresult[b.llload+a.currentTarget.name]=1}b.index++,b.onupdate&&b.onupdate(Math.floor(100*b.index/b.list.length)),b.index>=b.list.length&&(b.reloadtime&&clearTimeout(b.reloadtime),b.loader=null,c=b.result,LGlobal.forceRefresh=!0,b.oncomplete(c))},url:function(a){return LGlobal.traceDebug?a+(a.indexOf("?")>=0?"&":"?")+"t="+(new Date).getTime():a}},a.load=function(b,c,d){var e=new a;e.load(b,c,d)},a}(),LEasing={None:{easeIn:function(a,b,c,d){return b+a*c/d},easeOut:function(a,b,c,d){return b+a*c/d},easeInOut:function(a,b,c,d){return b+a*c/d}},Quad:{easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},Quint:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}},Sine:{easeIn:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOut:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOut:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b}},Strong:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}},Expo:{easeIn:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}},Circ:{easeIn:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOut:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}},Elastic:{easeIn:function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f))+b)},easeOut:function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+c+b)},easeInOut:function(a,b,c,d,e,f){var g;return 0==a?b:2==(a/=d/2)?b+c:(f||(f=d*.3*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b:.5*e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+c+b)}},Back:{easeIn:function(a,b,c,d,e){return typeof e==UNDEFINED&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOut:function(a,b,c,d,e){return typeof e==UNDEFINED&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOut:function(a,b,c,d,e){return typeof e==UNDEFINED&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b}},Bounce:{easeIn:function(a,b,c,d){return c-LEasing.Bounce.easeOut(d-a,0,c,d)+b},easeOut:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOut:function(a,b,c,d){return d/2>a?.5*LEasing.Bounce.easeIn(2*a,0,c,d)+b:.5*LEasing.Bounce.easeOut(2*a-d,0,c,d)+.5*c+b}}},Quad=LEasing.Quad,Cubic=LEasing.Cubic,Quart=LEasing.Quart,Quint=LEasing.Quint,Sine=LEasing.Sine,Strong=LEasing.Strong,Expo=LEasing.Expo,Circ=LEasing.Circ,Elastic=LEasing.Elastic,Back=LEasing.Back,Bounce=LEasing.Bounce,LTweenLite=function(){function a(a,b,c){var d=this;LExtends(d,LObject,[]),d.type="LTweenLiteChild",d.toNew=[],d.init(a,b,c)}function d(){var a=this;LExtends(a,LObject,[]),a.type="LTweenLite",a.tweens=[]}var c,e,b={init:function(a,b,c){var g,h,i,j,k,e=this,f=null;typeof c["tweenTimeline"]==UNDEFINED&&(c["tweenTimeline"]=d.TYPE_FRAME),e.target=a,e.duration=b||.001,e.vars=c,e.delay=e.vars.delay||0,e.vars["tweenTimeline"]==d.TYPE_TIMER?(e.currentTime=(new Date).getTime()/1e3,e.initTime=e.currentTime,e.startTime=e.initTime+e.delay):(e.currentTime=0,e.duration*=1e3,e.currentTime-=1e3*e.delay),e.combinedTimeScale=e.vars.timeScale||1,e.active=0==e.duration&&0==e.delay,e.varsto={},e.varsfrom={},e.varsDiff={},e.varsListIndex={},e.varsListCurr={},e.varsListTo={},e.varsListLength={},e.stop=!1,"function"!=typeof e.vars.ease&&(e.vars.ease=LEasing.None.easeIn),e.ease=e.vars.ease,delete e.vars.ease,e.vars.onComplete&&(e.onComplete=e.vars.onComplete,delete e.vars.onComplete),e.vars.onUpdate&&(e.onUpdate=e.vars.onUpdate,delete e.vars.onUpdate),e.vars.onStart&&(e.onStart=e.vars.onStart,delete e.vars.onStart);for(f in e.vars)if("coordinate"==f&&Array.isArray(e.vars[f])){for(g=0,h={x:e.target.x,y:e.target.y},i=0,j=e.vars[f].length;j>i;i++)k=e.vars[f][i],g+=LPoint.distance(k,h),h=k;e.varsListIndex[f]=0,e.varsListCurr[f]=0,e.varsListTo[f]=g,e.varsto[f]=e.vars[f],e.varsfrom[f]={x:e.target.x,y:e.target.y}}else"number"==typeof e.vars[f]&&(e.varsto[f]=e.vars[f],e.varsfrom[f]=e.target[f],e.varsDiff[f]=e.vars[f]-e.target[f])},pause:function(){this.stop=!0},resume:function(){this.stop=!1},tween:function(){var b,f,g,h,i,j,k,l,m,a=this,e=a.vars["tweenTimeline"]==d.TYPE_TIMER;if(e){if(f=(new Date).getTime()/1e3,g=f-a.startTime,0>g)return}else{if(a.stop)return;if(a.currentTime+=LGlobal.speed,a.currentTime<0)return}for(c in a.varsto)if(typeof a.varsListTo[c]==UNDEFINED)a.target[c]=a.ease(e?g:a.currentTime,a.varsfrom[c],a.varsDiff[c],a.duration);else{for(h=a.ease(e?g:a.currentTime,0,a.varsListTo[c],a.duration),h>a.varsListTo[c]&&(h=a.varsListTo[c]),i=a.varsListIndex[c]>0?a.vars[c][a.varsListIndex[c]-1]:a.varsfrom[c],j=a.vars[c][a.varsListIndex[c]],k=LPoint.distance(i,j);a.varsListCurr[c]+k<h;)a.varsListCurr[c]+=k,i=j,a.varsListIndex[c]++,j=a.vars[c][a.varsListIndex[c]],k=LPoint.distance(i,j);a.target.x=i.x,a.target.y=i.y,0!=k&&0!=j.x-i.x&&(a.target.x+=(j.x-i.x)*(h-a.varsListCurr[c])/k),0!=k&&0!=j.y-i.y&&(a.target.y+=(j.y-i.y)*(h-a.varsListCurr[c])/k)}if(a.onStart&&(a._dispatchEvent(a.onStart),delete a.onStart),l=e?g>=a.duration:a.currentTime>=a.duration){for(b in a.varsto)typeof a.varsListTo[b]==UNDEFINED?a.target[b]=a.varsto[b]:(m=a.varsto[b][a.vars[b].length-1],a.target.x=m.x,a.target.y=m.y);return a.onComplete&&a._dispatchEvent(a.onComplete),!0}return a.onUpdate&&a._dispatchEvent(a.onUpdate),!1},_dispatchEvent:function(a){var b=this;b.target.target=b.target,b.target.currentTarget=b,a(b.target),delete b.target.currentTarget,delete b.target.target},to:function(a,b,c){var d=this;return d.toNew.push({target:a,duration:b,vars:c}),d},keep:function(){var b,c,d,a=this;if(a.toNew.length>0){if(b=a.toNew.shift(),b.vars.loop&&(a.loop=!0),a.loop){c={};for(d in b.vars)c[d]=b.vars[d];a.to(b.target,b.duration,c)}return a.init(b.target,b.duration,b.vars),!0}return!1}};for(c in b)a.prototype[c]=b[c];d.TYPE_FRAME="type_frame",d.TYPE_TIMER="type_timer",b={count:function(){return this.tweens.length},ll_show:function(){var b,d,a=this,c=a.tweens.length;for(b=0;c>b;b++)d=a.tweens[b],d&&d.tween&&d.tween()&&(a.tweens.splice(b,1),b--,c=a.tweens.length,d.keep()&&a.add(d))},to:function(b,c,d){var e,f;if(b)return e=this,f=new a({},0,{}),e.tweens.push(f),f.to(b,c,d),f},add:function(a){this.tweens.push(a)},remove:function(a){var c,d,b=this;if(typeof a!=UNDEFINED)for(c=0,d=b.tweens.length;d>c;c++)if(a.objectIndex==b.tweens[c].objectIndex){b.tweens.splice(c,1);break}},removeAll:function(){this.tweens.splice(0,this.tweens.length)},pauseAll:function(){for(var a=0,b=this.tweens.length;b>a;a++)this.tweens[a].pause()},resumeAll:function(){for(var a=0,b=this.tweens.length;b>a;a++)this.tweens[a].resume()}};for(c in b)d.prototype[c]=b[c];return LTweenLiteTimeline=new d,LGlobal.childList.push(LTweenLiteTimeline),e=new d,e.TYPE_FRAME=d.TYPE_FRAME,e.TYPE_TIMER=d.TYPE_TIMER,LGlobal.childList.push(e),e}(),LAjax=function(){function a(){this.responseType=null}return a.prototype={TEXT:"text",JSON:"json",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",get:function(a,b,c,d){this.getRequest("GET",a,b,c,d)},post:function(a,b,c,d){this.getRequest("POST",a,b,c,d)},getRequest:function(a,b,c,d,e){var g,j,f=this,h="",i="";if(f.err=e,j=f.getHttp()){if(c)for(g in c)h+=i+g+"="+c[g],i="&";if("get"==a.toLowerCase()&&h.length>0&&(b+=(b.indexOf("?")>=0?"&":"?")+h,h=null),j.open(a,b,!0),f.responseType){if(f.responseType==f.JSON)try{j.responseType=f.responseType}catch(k){j.responseType=f.TEXT,j._responseType="json"}else j.responseType=f.responseType;f.responseType=f.TEXT}j.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),j.onreadystatechange=function(){4==j.readyState&&(j.status>=200&&j.status<300||304===j.status?d&&(j._responseType==f.JSON?(j._responseType=f.TEXT,d(JSON.parse(j.responseText))):j.responseType==f.ARRAY_BUFFER||j.responseType==f.BLOB||j.responseType==f.JSON?d(j.response):j.responseText.length>0?d(j.responseText):d(null)):e&&e(j))},j.send(h)}},getHttp:function(){if(typeof XMLHttpRequest!=UNDEFINED)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){this.err||this.err(a)}}return!1}},new a}(),LStageWebView=function(){function a(){var a=this;LExtends(a,LEventDispatcher,[]),a.display=document.createElement("div"),a.iframe=document.createElement("iframe"),a.display.style.position="absolute",a.display.style.marginTop="0px",a.display.style.marginLeft="0px",a.display.style.zIndex=11,LGlobal.ios&&(a.display.style.overflow="auto",a.display.style.webkitOverflowScrolling="touch"),a.display.appendChild(a.iframe),a.idAdded=!1}var c,b={loadURL:function(a){var b=this;b.iframe.src=a,b.iframe.onload=function(){b.dispatchEvent(LEvent.COMPLETE)}},show:function(){var a=this;a.idAdded||(LGlobal.object.appendChild(a.display),a.idAdded=!0),"none"==a.display.style.display&&(a.display.style.display="")},die:function(){LGlobal.object.removeChild(this.display),this.idAdded=!1},hide:function(){this.display.style.display="none"},setViewPort:function(a){var b=this,c=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,d=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;b.display.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+(a.y*d>>>0)+"px",b.display.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+(a.x*c>>>0)+"px",b.iframe.style.width=b.display.style.width=(a.width*c>>>0)+"px",b.iframe.style.height=b.display.style.height=(a.height*d>>>0)+"px"}};for(c in b)a.prototype[c]=b[c];return a}(),FPS=function(){function a(){var b,c,a=this;for(LExtends(a,LSprite,[]),LGlobal.fpsStatus||(LGlobal.fpsStatus={a:0,b:0,c:0,d:0,e:0,bitmapData:0,display:0,transform:0,graphics:0,text:0,reset:function(){this.a=this.bitmapData,this.b=this.display-1,this.c=this.transform-1,this.d=this.graphics-1,this.e=this.text-5,this.bitmapData=0,this.display=0,this.transform=0,this.graphics=0,this.text=0}}),a.fps=[],a.back=new LShape,a.back.alpha=.5,a.addChild(a.back),b=0;5>b;b++)c=new LTextField,c.color="#ffffff",c.y=20*b,a.addChild(c),a.fps.push(c);a.fpsCount=0,a.fpsTime=(new Date).getTime(),a.addEventListener(LEvent.ENTER_FRAME,a.showFPS)}return a.prototype.showFPS=function(a){var c,d,b=a.currentTarget;b.fpsCount++,c=(new Date).getTime(),c-b.fpsTime<1e3||(b.fps[0].text="FPS:"+Math.round(1e4*b.fpsCount/(c-b.fpsTime))/10,d=LGlobal.fpsStatus,b.fps[1].text="DisplayObject:"+d.c+"/"+d.b,b.fps[2].text="Draw image:"+d.a,b.fps[3].text="Draw graphics:"+d.d,b.fps[4].text="Draw text:"+d.e,b.fpsTime=c,b.fpsCount=0,b.back.graphics.clear(),b.back.graphics.drawRect(0,"#000000",[0,0,b.fps[1].getWidth(),100],!0,"#000000"))},a.prototype.die=function(){var a=this;LGlobal.fpsStatus=null,a.callParent("die",arguments)},a}(),LQuadTree=function(){function a(a){var b=this;LExtends(b,LObject,[]),b.q1=null,b.q2=null,b.q3=null,b.q4=null,b.parent=null,b.data=[],b.rect=a,b.root=b}var c,b={createChildren:function(b){var c,d,e;0!=b&&(c=this,d=c.rect.width/2,e=c.rect.height/2,c.q1=new a(new LRectangle(c.rect.x+d,c.rect.y,d,e)),c.q2=new a(new LRectangle(c.rect.x+d,c.rect.y+e,d,e)),c.q3=new a(new LRectangle(c.rect.x,c.rect.y+e,d,e)),c.q4=new a(new LRectangle(c.rect.x,c.rect.y,d,e)),c.q1.parent=c.q2.parent=c.q3.parent=c.q4.parent=c,c.q1.root=c.q2.root=c.q3.root=c.q4.root=c.root,c.q1.createChildren(b-1),c.q2.createChildren(b-1),c.q3.createChildren(b-1),c.q4.createChildren(b-1))},hasChildren:function(){var a=this;return a.q1&&a.q2&&a.q3&&a.q4},clear:function(){var a=this;return a.hasChildren()?a.q1.clear()||a.q2.clear()||a.q3.clear()||a.q4.clear():(a.q1=null,a.q2=null,a.q3=null,a.q4=null,a.parent=null,a.data=[],a)},add:function(a,b,c){var d=this;return d.isIn(b,c)?d.hasChildren()?d.q1.add(a,b,c)||d.q2.add(a,b,c)||d.q3.add(a,b,c)||d.q4.add(a,b,c):(d.data.push(a),d):null},remove:function(a,b,c){var e,d=this;return d.isIn(b,c)?d.hasChildren()?d.q1.remove(a,b,c)||d.q2.remove(a,b,c)||d.q3.remove(a,b,c)||d.q4.remove(a,b,c):(e=d.data.indexOf(a),-1!=e?(d.data.splice(e,1),d):null):null},isIn:function(a,b){var c=this;return(typeof a==UNDEFINED||a>=c.rect.x&&a<c.rect.right)&&(typeof b==UNDEFINED||b>=c.rect.y&&b<c.rect.bottom)},getDataInRect:function(a){var c,b=this;return b.rect.intersects(a)?(c=b.data.concat(),b.hasChildren()&&(c.push.apply(c,b.q1.getDataInRect(a)),c.push.apply(c,b.q2.getDataInRect(a)),c.push.apply(c,b.q3.getDataInRect(a)),c.push.apply(c,b.q4.getDataInRect(a))),c):[]}};for(c in b)a.prototype[c]=b[c];return a}(),LoadingSample1=function(){function a(a,b,c){base(this,LSprite,[]);var d=this;d.numberList=new Array([1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,0,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,0,0,1,1,1,1]),d.backgroundColor=null==b?"#000000":b,d.color=null==c?"#ffffff":c,d.progress=0,d.step=null==a?.5*LGlobal.width/15:a,d.back=new LSprite,d.addChild(d.back),d.num=new LSprite,d.addChild(d.num),d.num.mask=new LSprite,d.screenX=(LGlobal.width-15*d.step)/2,d.screenY=(LGlobal.height-5*d.step)/2,d.num.x=d.screenX,d.num.y=d.screenY,d.setProgress(d.progress)}return a.prototype.setProgress=function(a){var e,f,g,b=this,c=LGlobal.canvas,d="",h=b.step;a>=100?(d=b.getNumber(1),e=b.getNumber(0),f=b.getNumber(0),h=3*b.step):a>=10?(e=b.getNumber(Math.floor(a/10)),f=b.getNumber(a%10)):(e=b.getNumber(0),f=b.getNumber(a)),b.back.graphics.clear(),b.back.graphics.add(function(){if(c.beginPath(),c.fillStyle=b.backgroundColor,c.fillRect(0,0,LGlobal.width,LGlobal.height),c.closePath(),c.fillStyle=b.color,a>=100)for(g=0;g<d.length;g++)0!=d[g]&&c.fillRect(b.screenX+Math.floor(g%3)*b.step,b.screenY+Math.floor(g/3)*b.step,b.step,b.step);for(g=0;g<e.length;g++)0!=e[g]&&c.fillRect(b.screenX+h+Math.floor(g%3)*b.step,b.screenY+Math.floor(g/3)*b.step,b.step,b.step);for(g=0;g<f.length;g++)0!=f[g]&&c.fillRect(b.screenX+h+Math.floor(g%3)*b.step+4*b.step,b.screenY+Math.floor(g/3)*b.step,b.step,b.step);c.moveTo(b.screenX+h+9.7*b.step,b.screenY),c.lineTo(b.screenX+h+10.5*b.step,b.screenY),c.lineTo(b.screenX+h+9.3*b.step,b.screenY+5*b.step),c.lineTo(b.screenX+h+8.5*b.step,b.screenY+5*b.step),c.lineTo(b.screenX+h+9.7*b.step,b.screenY),c.fill(),c.moveTo(b.screenX+h+8.5*b.step,b.screenY+b.step),c.arc(b.screenX+h+8.5*b.step,b.screenY+b.step,.6*b.step,0,360+Math.PI/180),c.moveTo(b.screenX+h+10.5*b.step,b.screenY+4*b.step),c.arc(b.screenX+h+10.5*b.step,b.screenY+4*b.step,.6*b.step,0,360+Math.PI/180),c.fill()}),b.num.mask.graphics.clear(),b.num.mask.graphics.add(function(){var g;if(a>=100)for(g=0;g<d.length;g++)0!=d[g]&&c.rect(b.screenX+Math.floor(g%3)*b.step,b.screenY+Math.floor(g/3)*b.step,b.step,b.step);for(g=0;g<e.length;g++)0!=e[g]&&c.rect(b.screenX+h+Math.floor(g%3)*b.step,b.screenY+Math.floor(g/3)*b.step,b.step,b.step);for(g=0;g<f.length;g++)0!=f[g]&&c.rect(b.screenX+h+Math.floor(g%3)*b.step+4*b.step,b.screenY+Math.floor(g/3)*b.step,b.step,b.step)}),c.fillStyle=LGlobal._create_loading_color(),b.num.graphics.clear(),b.num.graphics.drawRect(1,c.fillStyle,[0,.01*5*b.step*(100-a),LGlobal.width,LGlobal.height],!0,c.fillStyle)},a.prototype.getNumber=function(a){return this.numberList[a]},a}(),LoadingSample2.prototype.setProgress=function(a){var b=this,c=LGlobal.canvas;b.progressLabel.text=a+"%",b.showLabel.mask.clear(),b.showLabel.mask.drawRect(0,"#000000",[b.screenX,0,.01*b.screenWidth*a,LGlobal.height]),a>=100&&(c.shadowOffsetX=0,c.shadowOffsetY=0)},LoadingSample3.prototype.onframe=function(a){var b,c,d;if(a.progress>=100){if(a.star.length>0){for(b=0,d=a.star.length;d>b;b++)a.removeChild(a.star[b]);a.star.length=0}}else{for(b=0,d=a.star.length;d>b;b++)c=a.star[b],c.alpha-=.1,c.x+=c.speedx,c.y+=c.speedy,c.alpha<=0&&(a.star.splice(b,1),a.removeChild(c),b--,d--);a.star.length<10&&a.addStar()}},LoadingSample3.prototype.addStar=function(){var a=this,b=LGlobal.canvas,c=new LSprite,d=1+Math.floor(4*Math.random());c.graphics.add(function(){b.beginPath(),b.fillStyle="#ffffff",b.lineTo(2*d,d),b.lineTo(4*d,0),b.lineTo(3*d,2*d),b.lineTo(4*d,4*d),b.lineTo(2*d,3*d),b.lineTo(0,4*d),b.lineTo(d,2*d),b.lineTo(0,0),b.fill()}),c.x=a.screenX+.01*a.screenWidth*a.progress,c.y=a.screenY,c.speedx=4-8*Math.random(),c.speedy=4-8*Math.random(),a.star.push(c),a.addChild(c)},LoadingSample3.prototype.setProgress=function(a){var b=this,c=LGlobal.canvas;a>100&&(a=100),b.progress=a,b.back.graphics.clear(),b.back.graphics.add(function(){c.beginPath(),c.fillStyle="#00FFFF",c.rect(b.screenX-3,b.screenY-3,b.screenWidth+6,b.screenHeight+6),c.fill(),c.beginPath(),c.fillStyle="#990033",c.rect(b.screenX,b.screenY,b.screenWidth,b.screenHeight),c.fill(),c.beginPath(),c.fillStyle=b.color,c.rect(b.screenX,b.screenY,.01*b.screenWidth*a,b.screenHeight),c.fill()}),b.label.text=a+"%"},LoadingSample4.prototype.onframe=function(a){a.target.arc.rotate+=20},LoadingSample4.prototype.setProgress=function(a){var b=this;a>100&&(a=100),b.progress=a,b.label.text=a+"%",b.label.x=.5*LGlobal.width-.5*b.label.getWidth()},LoadingSample5.prototype.onframe=function(a){var b=a.target;b.index++<b.max||(b.index=0,b.arc.rotate+=30)},LoadingSample5.prototype.setProgress=function(a){var b=this;a>100&&(a=100),b.progress=a,b.label.text=a+"%",b.label.x=.5*LGlobal.width-.5*b.label.getWidth()},LoadingSample6.prototype._addHole=function(){var e,f,a=this,b=a.holeAmount,c=2*a.holeR+a.holesx,d=a.holeR;for(e=0;b>e;e++)f=new LSprite,f.x=e*c,f.graphics.drawArc(1,"#111",[0,0,d,0,2*Math.PI],!0,"#000"),f.graphics.drawArc(1,"#333",[0,0,d,1.7*Math.PI,.7*Math.PI],!1),a.holeLayer.addChild(f)
},LoadingSample6.prototype.setProgress=function(a){var e,f,g,h,i,j,k,l,b=this,c=2*b.holeR+b.holesx,d=b.holeR;for(b.progress=a/100,e=new Array;Math.floor(b.progress/.2)>b.step;)f=2*d,g=f,h=LGlobal.canvas.createLinearGradient(0,2*-g,0,g),h.addColorStop(0,"white"),h.addColorStop(1,b.progressColor),i=new LSprite,i.x=b.step*c,i.scaleX=0,i.scaleY=0,i.graphics.drawArc(0,"",[0,0,d,0,2*Math.PI],!0,h),b.progressLayer.addChild(i),e.push(i),b.step++;for(j=function(a){var e,c=new LSprite;c.alpha=.9,c.x=a.x,c.graphics.drawArc(1,b.filterColor,[0,0,d,0,2*Math.PI],!1),b.progressLayer.addChild(c),e=new LDropShadowFilter(0,5,b.filterColor,10),c.filters=[e],LTweenLite.to(c,.5,{scaleX:1.7,scaleY:1.7,alpha:0,onComplete:function(a){a.parent.removeChild(a)}})},k=0;k<e.length;k++)l=e[k],LTweenLite.to(l,1,{scaleX:1,scaleY:1,onComplete:j})},LoadingSample7.prototype._addHole=function(){var f,g,h,i,a=this,b=a.holeAmount,c=a.holeW+a.holesx,e=(a.holeW,a.holeH);for(f=0;b>f;f++)g=new LSprite,g.x=f*c,g.graphics.drawRect(1,"#333",[1,1,a.holeW,a.holeH],!1),g.graphics.drawRect(1,"#111",[0,0,a.holeW,a.holeH],!0,"#000"),a.holeLayer.addChild(g),h=LGlobal.canvas.createLinearGradient(0,-e,0,e),h.addColorStop(0,"white"),h.addColorStop(1,a.progressColor),i=new LSprite,i.alpha=0,i.x=f*c,i.graphics.drawRect(0,"",[0,0,a.holeW,a.holeH],!0,h),a.progressLayer.addChild(i)},LoadingSample7.prototype.setProgress=function(a){var c,d,e,f,b=this;if(b.progress=a/100,Math.floor(b.progress/.1)>b.step){for(c=Math.ceil(b.progress/.1),c>10&&(c=10),d=0;c>d;d++)e=b.progressLayer.childList,e[d].alpha>0||(f=b.progressLayer.childList[d],LTweenLite.to(f,1,{alpha:1}));b.step++}},LBox2d=function(){function a(b,c,d){var f,g,i,h,j,e=this;Box2D.Dynamics.b2World.prototype.LAddController=Box2D.Dynamics.b2World.prototype.AddController,Box2D.Dynamics.b2World.prototype.AddController=function(b){var d,c={};for(d in b)c[d]=b[d];return a&&(a.m_controllerList=c),this.LAddController(b)},h=Box2D,j=[h.Collision,h.Common,h.Common.Math,h.Dynamics,h.Dynamics.Contacts,h.Dynamics.Controllers,h.Dynamics.Joints,h.Collision.Shapes];for(f in j)for(g in j[f])e[g]=j[f][g];typeof d==UNDEFINED&&(d=30),e.stop=!1,e.drawScale=30,e.selectedBody=null,e.mouseJoint=null,e.mousePVec=null,e.contactListener=null,b=typeof b==UNDEFINED?new e.b2Vec2(0,9.8):new e.b2Vec2(b[0],b[1]),typeof c==UNDEFINED&&(c=!0),e.world=new e.b2World(b,c),e.removeList=new Array,LGlobal.traceDebug&&(i=new e.b2DebugDraw,i.SetSprite(LGlobal.canvas),i.SetLineThickness(1),i.SetFillAlpha(.5),i.SetAlpha(1),i.SetDrawScale(e.drawScale),i.SetFlags(e.b2DebugDraw.e_shapeBit|e.b2DebugDraw.e_jointBit),e.world.SetDebugDraw(i)),LGlobal.destroy=!0}return a.prototype={setEvent:function(a,b){var c=this;if(a==LEvent.ENTER_FRAME)return c.ll_enterFrame=b,void 0;switch(c.contactListener||(c.contactListener=new c.b2ContactListener,c.world.SetContactListener(c.contactListener)),a){case LEvent.END_CONTACT:c.contactListener.EndContact=b;break;case LEvent.PRE_SOLVE:c.contactListener.PreSolve=b;break;case LEvent.POST_SOLVE:c.contactListener.PostSolve=b;break;case LEvent.BEGIN_CONTACT:default:c.contactListener.BeginContact=b}},setWeldJoint:function(a,b){var c=this,d=new c.b2WeldJointDef;return d.Initialize(b,a,b.GetWorldCenter()),c.world.CreateJoint(d)},setLineJoint:function(a,b,c,d,e){var f=this,g=new f.b2Vec2(c[0],c[1]),h=new f.b2LineJointDef;return h.Initialize(a,b,b.GetWorldCenter(),g),null==d?h.enableLimit=!1:(h.lowerTranslation=d[0],h.upperTranslation=d[1],h.enableLimit=!0),null==e?h.enableMotor=!1:(h.maxMotorForce=e[0],h.motorSpeed=e[1],h.enableMotor=!0),f.world.CreateJoint(h)},setGearJoint:function(a,b,c,d,e){var f=this,g=new f.b2GearJointDef;return g.joint1=d,g.joint2=e,g.bodyA=a,g.bodyB=b,g.ratio=c*f.b2Settings.b2_pi/(300/f.drawScale),f.world.CreateJoint(g)},setPrismaticJoint:function(a,b,c,d,e){var f=this,g=new f.b2Vec2(c[0],c[1]),h=new f.b2PrismaticJointDef;return h.Initialize(b,a,b.GetWorldCenter(),g),null==d?h.enableLimit=!1:(h.lowerTranslation=d[0],h.upperTranslation=d[1],h.enableLimit=!0),null==e?h.enableMotor=!1:(h.maxMotorForce=e[0],h.motorSpeed=e[1],h.enableMotor=!0),f.world.CreateJoint(h)},setRevoluteJoint:function(a,b,c,d){var e=this,f=new e.b2RevoluteJointDef;return f.Initialize(a,b,b.GetWorldCenter()),null==c?f.enableLimit=!1:(f.lowerAngle=c[0]*e.b2Settings.b2_pi/180,f.upperAngle=c[1]*e.b2Settings.b2_pi/180,f.enableLimit=!0),null==d?f.enableMotor=!1:(f.maxMotorTorque=d[0],f.motorSpeed=d[1],f.enableMotor=!0),e.world.CreateJoint(f)},setDistanceJoint:function(a,b){var c=this,d=new c.b2DistanceJointDef;return d.Initialize(a,b,a.GetWorldCenter(),b.GetWorldCenter()),c.world.CreateJoint(d)},setPulleyJoint:function(a,b,c,d,e){var f=this,g=a.GetWorldCenter(),h=b.GetWorldCenter(),i=new f.b2Vec2(g.x+c[0]/f.drawScale,g.y+c[1]/f.drawScale),j=new f.b2Vec2(h.x+d[0]/f.drawScale,h.y+d[1]/f.drawScale),k=new f.b2PulleyJointDef;return k.Initialize(a,b,i,j,g,h,e),k.maxLengthA=c[2]/f.drawScale,k.maxLengthB=d[2]/f.drawScale,f.world.CreateJoint(k)},addCircle:function(a,b,c,d,e,f,g){var i,h=this;return h.bodyDef=new h.b2BodyDef,h.bodyDef.type=d,h.fixDef=new h.b2FixtureDef,h.fixDef.density=e,h.fixDef.friction=f,h.fixDef.restitution=g,h.fixDef.shape=new h.b2CircleShape(a),h.bodyDef.position.x=b,h.bodyDef.position.y=c,i=h.world.CreateBody(h.bodyDef),i.CreateFixture(h.fixDef),i},addPolygon:function(a,b,c,d,e,f,g,h){var j,i=this;return i.bodyDef=new i.b2BodyDef,i.bodyDef.type=e,i.fixDef=new i.b2FixtureDef,i.fixDef.density=f,i.fixDef.friction=g,i.fixDef.restitution=h,i.fixDef.shape=new i.b2PolygonShape,i.fixDef.shape.SetAsBox(a,b),i.bodyDef.position.x=c,i.bodyDef.position.y=d,j=i.world.CreateBody(i.bodyDef),j.CreateFixture(i.fixDef),j},addVertices:function(a,b,c,d,e){var g,h,i,f=this;for(f.bodyDef=new f.b2BodyDef,f.bodyDef.type=b,i=f.world.CreateBody(f.bodyDef),g=0,h=a.length;h>g;g++)f.createShapeAsArray(i,a[g],b,c,d,e);return i},createShapeAsArray:function(a,b,c,d,e,f){var j,g=this,h=new g.b2PolygonShape,i=g.createVerticesArray(b);h.SetAsArray(i,0),j=new g.b2FixtureDef,j.shape=h,j.density=d,j.friction=e,j.restitution=f,a.CreateFixture(j)},createVerticesArray:function(a){var c,d,b=this,e=new Array;if(a.length<3)return e;for(c=0,d=a.length;d>c;c++)e.push(new b.b2Vec2(a[c][0]/b.drawScale,a[c][1]/b.drawScale));return e},getBodyAtMouse:function(a,b){var d,c=this;return c.mousePVec=new c.b2Vec2(a,b),d=new c.b2AABB,d.lowerBound.Set(a-.001,b-.001),d.upperBound.Set(a+.001,b+.001),c.selectedBody=null,c.world.QueryAABB(c.getBodyCallBack,d),c.selectedBody},getBodyCallBack:function(a){var b=LGlobal.box2d;return a.GetBody().GetType()!=b.b2Body.b2_staticBody&&a.GetShape().TestPoint(a.GetBody().GetTransform(),b.mousePVec)?(b.selectedBody=a.GetBody(),!1):!0},ll_show:function(){var a=this,b=null;for(b in a.removeList)a.world.DestroyBody(a.removeList[b]);a.removeList.splice(0,a.removeList.length),a.stop||(a.ll_enterFrame&&a.ll_enterFrame({target:a}),a.world.Step(1/30,10,10),a.world.ClearForces(),LGlobal.traceDebug&&a.world.DrawDebugData())},synchronous:function(){var d,h,i,b=this,c=null,e=null,f=0,g=0;for(h=b.world.GetBodyList();h;h=h.GetNext())d=h.GetUserData(),d&&(null==e&&(c=d.parent,f=h.GetPosition().x,g=h.GetPosition().y),h.SetPosition(new b.b2Vec2((d.x+d.rotatex+c.x)/b.drawScale,(d.y+d.rotatey+c.y)/b.drawScale)),null==e&&(e={x:h.GetPosition().x-f,y:h.GetPosition().y-g}));for(i=b.world.GetJointList();i;i=i.GetNext())i.m_groundAnchor1&&(i.m_groundAnchor1.x+=e.x,i.m_groundAnchor1.y+=e.y),i.m_groundAnchor2&&(i.m_groundAnchor2.x+=e.x,i.m_groundAnchor2.y+=e.y);a.m_controllerList&&b.world.m_controllerList&&c&&(LGlobal.box2d.world.m_controllerList.offset=a.m_controllerList.offset-c.y/LGlobal.box2d.drawScale)}},a}(),LSprite.prototype.setBodyMouseJoint=function(a){var b=this;b.box2dBody&&(b.box2dBody.mouseJoint=a)},LSprite.prototype.clearBody=function(){var b=this;b.box2dBody&&(LGlobal.box2d.removeList.push(b.box2dBody),b.box2dBody=null)},LSprite.prototype.addBodyCircle=function(a,b,c,d,e,f,g){var h=this;h.rotatex=a,h.rotatey=a,h.box2dBody=LGlobal.box2d.addCircle(a/LGlobal.box2d.drawScale,(h.x+b)/LGlobal.box2d.drawScale,(h.y+c)/LGlobal.box2d.drawScale,1==d?LGlobal.box2d.b2Body.b2_dynamicBody:LGlobal.box2d.b2Body.b2_staticBody,null==e?.5:e,null==f?.4:f,null==g?.8:g),h.box2dBody.SetUserData(h)},LSprite.prototype.addBodyPolygon=function(a,b,c,d,e,f){var g=this;g.rotatex=a/2,g.rotatey=b/2,g.box2dBody=LGlobal.box2d.addPolygon(.5*a/LGlobal.box2d.drawScale,.5*b/LGlobal.box2d.drawScale,g.x/LGlobal.box2d.drawScale,g.y/LGlobal.box2d.drawScale,1==c?LGlobal.box2d.b2Body.b2_dynamicBody:LGlobal.box2d.b2Body.b2_staticBody,null==d?.5:d,null==e?.4:e,null==f?.8:f),g.box2dBody.SetUserData(g)},LSprite.prototype.addBodyVertices=function(a,b,c,d,e,f,g){var h=this;h.rotatex=0,h.rotatey=0,h.box2dBody=LGlobal.box2d.addVertices(a,1==d?LGlobal.box2d.b2Body.b2_dynamicBody:LGlobal.box2d.b2Body.b2_staticBody,e,f,g),h.box2dBody.SetUserData(h),h.box2dBody.SetPosition(new LGlobal.box2d.b2Vec2((h.x+b)/LGlobal.box2d.drawScale,(h.y+c)/LGlobal.box2d.drawScale))},LGlobal.mouseJoint_start=function(a){var b,c,d,e;LGlobal.IS_MOUSE_DOWN&&LGlobal.box2d&&!LGlobal.box2d.mouseJoint&&!LGlobal.box2d.stop&&(b=a.offsetX/LGlobal.box2d.drawScale,c=a.offsetY/LGlobal.box2d.drawScale,d=LGlobal.box2d.getBodyAtMouse(b,c),d&&d.mouseJoint&&(e=new LGlobal.box2d.b2MouseJointDef,e.bodyA=LGlobal.box2d.world.GetGroundBody(),e.bodyB=d,e.target.Set(b,c),e.collideConnected=!0,e.maxForce=3e5*d.GetMass(),LGlobal.box2d.mouseJoint=LGlobal.box2d.world.CreateJoint(e),d.SetAwake(!0)))},LGlobal.mouseJoint_move=function(a){LGlobal.IS_MOUSE_DOWN&&LGlobal.box2d&&LGlobal.box2d.mouseJoint&&(mX=a.offsetX/LGlobal.box2d.drawScale,mY=a.offsetY/LGlobal.box2d.drawScale,LGlobal.box2d.mouseJoint.SetTarget(new LGlobal.box2d.b2Vec2(mX,mY)))},LGlobal.mouseJoint_end=function(){null!=LGlobal.box2d&&LGlobal.box2d.mouseJoint&&(LGlobal.box2d.world.DestroyJoint(LGlobal.box2d.mouseJoint),LGlobal.box2d.mouseJoint=null)},LTransition=function(){function a(a,b){this.child=a,this.trans=b}return a.prototype={startTransition:function(){var b=this;switch(b.trans.type){case a.Blinds:b.blinds();break;case a.Fade:b.fade();break;case a.Fly:b.fly();break;case a.Iris:b.iris();break;case a.Squeeze:b.squeeze();break;case a.Wipe:b.wipe();break;case a.Zoom:b.zoom();break;case a.PixelDissolve:b.pixelDissolve();break;case a.Curtain:b.curtain();break;default:throw"the type is not exists."}},blindsComplete:function(b){b.trans.direction==a.OUT?b.child.mask.clear():b.blindsUpdateRun(),b.child.mask=null,b.trans.onComplete&&b.trans.onComplete(b.child)},blindsUpdateRun:function(){var a=this,b=a.child.mask,c=LGlobal.canvas;b.clear(),a.trans.dimension?b.add(function(){c.save();for(var b=0;b<a.trans.numStrips;b++)c.rect(b*a.maxSize,0,a.blindsSize,a.child.getHeight());c.restore()}):b.add(function(){c.save();for(var b=0;b<a.trans.numStrips;b++)c.rect(0,0+b*a.maxSize,a.child.getWidth(),a.blindsSize);c.restore()})},blindsUpdate:function(a){a.blindsUpdateRun(),a.trans.onUpdate&&a.trans.onUpdate(a.child)},blinds:function(){var c,d,b=this;b.trans.numStrips||(b.trans.numStrips=1),b.blindsSize=0,b.maxSize=b.trans.dimension?b.child.getWidth()/b.trans.numStrips>>0:b.child.getHeight()/b.trans.numStrips>>0,c=new LGraphics,b.child.mask=c,d=b.maxSize,b.trans.direction==a.OUT&&(b.blindsSize=b.maxSize,d=0),LTweenLite.to(b,b.trans.duration,{blindsSize:d,onComplete:b.blindsComplete,onUpdate:b.blindsUpdate,ease:b.trans.easing})},fadeComplete:function(a){a.child.alpha=a.alpha,a.trans.onComplete&&a.trans.onComplete(a.child)},fadeUpdate:function(a){a.child.alpha=a.alpha,a.trans.onUpdate&&a.trans.onUpdate(a.child)},fade:function(){var b=this,c=1;b.alpha=0,b.trans.direction==a.OUT&&(b.alpha=1,c=0),b.child.alpha=b.alpha,LTweenLite.to(b,b.trans.duration,{alpha:c,onComplete:b.fadeComplete,onUpdate:b.fadeUpdate,ease:b.trans.easing})},flyComplete:function(a){a.child.x=a.x,a.child.y=a.y,a.trans.onComplete&&a.trans.onComplete(a.child)},flyUpdate:function(a){a.child.x=a.x,a.child.y=a.y,a.trans.onUpdate&&a.trans.onUpdate(a.child)},fly:function(){var b=this,c=b.child.x,d=b.child.y;switch(b.trans.startPoint){case 1:b.x=-b.child.getWidth(),b.y=-b.child.getHeight();break;case 2:b.x=.5*(LGlobal.width-b.child.getWidth()),b.y=-b.child.getHeight();break;case 3:b.x=LGlobal.width,b.y=-b.child.getHeight();break;case 4:b.x=-b.child.getWidth(),b.y=.5*(LGlobal.height-b.child.getHeight());break;case 6:b.x=LGlobal.width,b.y=.5*(LGlobal.height-b.child.getHeight());break;case 7:b.x=-b.child.getWidth(),b.y=LGlobal.height;break;case 8:b.x=.5*(LGlobal.width-b.child.getWidth()),b.y=LGlobal.height;break;case 9:b.x=LGlobal.width,b.y=LGlobal.height;break;case 5:default:b.x=.5*(LGlobal.width-b.child.getWidth()),b.y=.5*(LGlobal.height-b.child.getHeight())}b.trans.direction==a.OUT?(c=b.x,d=b.y,b.x=b.child.x,b.y=b.child.y):(b.child.x=b.x,b.child.y=b.y),LTweenLite.to(b,b.trans.duration,{x:c,y:d,onComplete:b.flyComplete,onUpdate:b.flyUpdate,ease:b.trans.easing})},irisComplete:function(b){b.trans.direction==a.OUT?b.child.mask.clear():b.irisUpdateRun(),b.child.mask=null,b.trans.onComplete&&b.trans.onComplete(b.child)},irisUpdateRun:function(){var a=this,b=a.child.mask;LGlobal.canvas,b.clear(),a.trans.shape==LIris.CIRCLE?b.drawArc(0,"#000000",[a.x,a.y,a.r,0,2*Math.PI]):b.drawRect(0,"#000000",[a.x+a.sLeft,a.y+a.sTop,a.width,a.height])},irisUpdate:function(a){a.irisUpdateRun(),a.trans.onUpdate&&a.trans.onUpdate(a.child)},iris:function(){var c,b=this;switch(b.sLeft=0,b.sTop=0,b.width=0,b.height=0,b.x=0,b.y=0,b.r=0,b.eWidth=b.child.getWidth(),b.eHeight=b.child.getHeight(),b.trans.startPoint){case 1:b.eR=Math.sqrt(b.eWidth*b.eWidth+b.eHeight*b.eHeight);break;case 2:b.eR=Math.sqrt(.5*b.eWidth*.5*b.eWidth+b.eHeight*b.eHeight),b.x=.5*b.child.getWidth();break;case 3:b.eR=Math.sqrt(b.eWidth*b.eWidth+b.eHeight*b.eHeight),b.x=b.child.getWidth();break;case 4:b.eR=Math.sqrt(b.eWidth*b.eWidth+.5*b.eHeight*.5*b.eHeight),b.y=.5*b.child.getHeight();break;case 6:b.eR=Math.sqrt(b.eWidth*b.eWidth+.5*b.eHeight*.5*b.eHeight),b.x=b.child.getWidth(),b.y=.5*b.child.getHeight();break;case 7:b.eR=Math.sqrt(b.eWidth*b.eWidth+b.eHeight*b.eHeight),b.y=b.child.getHeight();break;case 8:b.eR=Math.sqrt(.5*b.eWidth*.5*b.eWidth+b.eHeight*b.eHeight),b.x=.5*b.child.getWidth(),b.y=b.child.getHeight();break;case 9:b.eR=Math.sqrt(b.eWidth*b.eWidth+b.eHeight*b.eHeight),b.x=b.child.getWidth(),b.y=b.child.getHeight();break;case 5:default:b.eR=Math.sqrt(.5*b.eWidth*.5*b.eWidth+.5*b.eHeight*.5*b.eHeight),b.x=.5*b.child.getWidth(),b.y=.5*b.child.getHeight()}b.eLeft=-b.x,b.eTop=-b.y,c=new LGraphics,b.child.mask=c,b.maxSize,b.trans.direction==a.OUT&&(b.sLeft=b.eLeft,b.sTop=b.eTop,b.eLeft=0,b.eTop=0,b.width=b.eWidth,b.height=b.eHeight,b.eWidth=0,b.eHeight=0,b.r=b.eR,b.eR=0),LTweenLite.to(b,b.trans.duration,{width:b.eWidth,height:b.eHeight,sLeft:b.eLeft,sTop:b.eTop,r:b.eR,onComplete:b.irisComplete,onUpdate:b.irisUpdate,ease:b.trans.easing})},curtainComplete:function(b){b.trans.direction==a.OUT?b.child.mask.clear():b.curtainUpdateRun(),b.child.mask=null,b.trans.onComplete&&b.trans.onComplete(b.child)},curtainUpdateRun:function(){var a=this,b=a.child.mask,c=LGlobal.canvas;b.clear(),a.trans.dimension?b.add(function(){c.beginPath(),c.save(),c.rect(0,0,a.width,a.child.getHeight()),c.rect(a.child.getWidth()-a.width,0,a.width,a.child.getHeight()),c.restore()}):b.add(function(){c.beginPath(),c.save(),c.rect(0,0,a.child.getWidth(),a.height),c.rect(0,a.child.getHeight()-a.height,a.child.getWidth(),a.height),c.restore()})},curtainUpdate:function(a){a.curtainUpdateRun(),a.trans.onUpdate&&a.trans.onUpdate(a.child)},curtain:function(){var e,b=this,c=.5*b.child.getWidth(),d=.5*b.child.getHeight();b.trans.dimension?d=0:c=0,b.width=0,b.height=0,e=new LGraphics,b.child.mask=e,b.maxSize,b.trans.direction==a.OUT&&(b.width=c,b.height=d,c=0,d=0),LTweenLite.to(b,b.trans.duration,{width:c,height:d,onComplete:b.curtainComplete,onUpdate:b.curtainUpdate,ease:b.trans.easing})},squeezeComplete:function(a){a.child.scaleX=a.scaleX,a.child.scaleY=a.scaleY,a.trans.onComplete&&a.trans.onComplete(a.child)},squeezeUpdate:function(a){a.child.scaleX=a.scaleX,a.child.scaleY=a.scaleY,a.trans.onUpdate&&a.trans.onUpdate(a.child)},squeeze:function(){var b=this,c=1,d=1;b.scaleX=0,b.scaleY=0,b.trans.dimension?b.scaleX=1:b.scaleY=1,b.trans.direction==a.OUT&&(c=b.scaleX,d=b.scaleY,b.scaleX=1,b.scaleY=1),b.child.scaleX=b.scaleX,b.child.scaleY=b.scaleY,LTweenLite.to(b,b.trans.duration,{scaleX:c,scaleY:d,onComplete:b.squeezeComplete,onUpdate:b.squeezeUpdate,ease:b.trans.easing})},zoomComplete:function(a){a.child.scaleX=a.scaleX,a.child.scaleY=a.scaleY,a.trans.onComplete&&a.trans.onComplete(a.child)},zoomUpdate:function(a){a.child.scaleX=a.scaleX,a.child.scaleY=a.scaleY,a.trans.onUpdate&&a.trans.onUpdate(a.child)},zoom:function(){var b=this,c=1,d=1;b.scaleX=0,b.scaleY=0,b.trans.direction==a.OUT&&(c=0,d=0,b.scaleX=1,b.scaleY=1),b.child.scaleX=b.scaleX,b.child.scaleY=b.scaleY,LTweenLite.to(b,b.trans.duration,{scaleX:c,scaleY:d,onComplete:b.zoomComplete,onUpdate:b.zoomUpdate,ease:b.trans.easing})},wipeComplete:function(b){b.trans.direction==a.OUT?b.child.mask.clear():b.wipeUpdateRun(),b.child.mask=null,b.trans.onComplete&&b.trans.onComplete(b.child)},wipeUpdateRun:function(){var a=this,b=a.child.mask;LGlobal.canvas,b.clear(),b.drawVertices(0,"#000000",[[a.leftTopX,a.leftTopY],[a.leftBottomX,a.leftBottomY],[a.rightBottomX,a.rightBottomY],[a.rightTopX,a.rightTopY]])},wipeUpdate:function(a){a.wipeUpdateRun(),a.trans.onUpdate&&a.trans.onUpdate(a.child)},wipe:function(){var m,n,o,p,q,r,s,t,u,b=this,c=b.child.getWidth(),d=b.child.getHeight(),e=b.leftTopX=0,f=b.leftTopY=0,g=b.leftBottomX=0,h=b.leftBottomY=d,i=b.rightTopX=c,j=b.rightTopY=0,k=b.rightBottomX=c,l=b.rightBottomY=d;switch(b.trans.startPoint){case 1:e=b.leftTopX=-c,g=b.leftBottomX=2*-c,b.rightTopX=0,i=2*c,b.rightBottomX=-c,k=c;break;case 2:f=b.leftTopY=-d,b.leftBottomY=0,h=d,j=b.rightTopY=-d,b.rightBottomY=0,l=d;break;case 3:b.leftTopX=c,e=-c,b.leftBottomX=2*c,g=0,i=b.rightTopX=2*c,k=b.rightBottomX=3*c;break;case 4:b.rightTopX=0,i=c,b.rightBottomX=0,k=c;break;case 6:b.leftTopX=c,e=0,b.leftBottomX=c,g=0;break;case 7:g=b.leftBottomX=-c,e=b.leftTopX=2*-c,b.rightBottomX=0,k=2*c,b.rightTopX=-c,i=c;break;case 8:h=b.leftBottomY=d,b.leftTopY=d,f=0,l=b.rightBottomY=d,b.rightTopY=d,j=0;break;case 9:b.leftBottomX=c,g=-c,b.leftTopX=2*c,e=0,k=b.rightBottomX=2*c,i=b.rightTopX=3*c;break;case 5:default:b.leftTopX=.5*c,b.leftTopY=.5*d,b.rightTopX=.5*c,b.rightTopY=.5*d,b.leftBottomX=.5*c,b.leftBottomY=.5*d,b.rightBottomX=.5*c,b.rightBottomY=.5*d,e=0,f=0,g=0,h=d,i=c,j=0,k=c,l=d}m=new LGraphics,b.child.mask=m,b.trans.direction==a.OUT&&(n=e,o=f,p=g,q=h,r=i,s=j,t=k,u=l,e=b.leftTopX,f=b.leftTopY,g=b.leftBottomX,h=b.leftBottomY,i=b.rightTopX,j=b.rightTopY,k=b.rightBottomX,l=b.rightBottomY,b.leftTopX=n,b.leftTopY=o,b.leftBottomX=p,b.leftBottomY=q,b.rightTopX=r,b.rightTopY=s,b.rightBottomX=t,b.rightBottomY=u),LTweenLite.to(b,b.trans.duration,{leftTopX:e,leftTopY:f,leftBottomX:g,leftBottomY:h,rightTopX:i,rightTopY:j,rightBottomX:k,rightBottomY:l,onComplete:b.wipeComplete,onUpdate:b.wipeUpdate,ease:b.trans.easing})},pixelDissolveComplete:function(b){b.trans.direction==a.OUT?b.child.mask.clear():b.pixelDissolveUpdateRun(),b.child.mask=null,b.trans.onComplete&&b.trans.onComplete(b.child)},pixelDissolveUpdateRun:function(){var d,a=this,b=a.child.mask,c=LGlobal.canvas;b.clear(),b.add(function(){c.beginPath(),c.save();for(var b=0;b<a.index;b++)d=a.list[b],c.rect(d[0]*a.w,d[1]*a.h,a.w,a.h);c.restore()})},pixelDissolveUpdate:function(a){a.pixelDissolveUpdateRun(),a.trans.onUpdate&&a.trans.onUpdate(a.child)},pixelDissolve:function(){var d,e,f,b=this,c=new LGraphics;for(b.child.mask=c,LGlobal.mg=c,b.w=b.child.getWidth()/b.trans.xSections,b.h=b.child.getHeight()/b.trans.ySections,b.list=[],d=0;d<b.trans.xSections;d++)for(e=0;e<b.trans.ySections;e++)b.list.push([d,e]);b.index=0,f=b.trans.xSections*b.trans.ySections,b.trans.direction==a.OUT&&(b.index=f,f=0),b.list=b.list.sort(function(){return Math.random()>.5}),b.pixelDissolveUpdateRun(),LTweenLite.to(b,b.trans.duration,{index:f,onComplete:b.pixelDissolveComplete,onUpdate:b.pixelDissolveUpdate,ease:b.trans.easing})}},a.IN="in",a.OUT="out",a.Blinds=1,a.Fade=2,a.Fly=3,a.Iris=4,a.Curtain=5,a.PixelDissolve=6,a.Squeeze=7,a.Wipe=8,a.Zoom=9,a}(),LIris=function(){function a(){}return a.SQUARE=0,a.CIRCLE=1,a}(),LTransitionManager=function(){function a(a){this.child=a}return a.prototype={startTransition:function(b){return a.start(this.child,b)}},a.start=function(a,b){var c=new LTransition(a,b);return c.startTransition(),c},a}(),LFlash=function(){function a(){}return a.SpriteSheetConvert=function(a){var c,d,b=[];for(d=0;d<a.length;d++)c=a[d],b.push({x:c.frame.x,sx:c.spriteSourceSize.x,y:c.frame.y,sy:c.spriteSourceSize.y,width:c.frame.w,height:c.frame.h});return b},a}(),LString={trim:function(a){return a.replace(/(^\s*)|(\s*$)|(\n)/g,"")},leftTrim:function(a){return a.replace(/(^\s*)|(^\n)/g,"")},rightTrim:function(a){return a.replace(/(\s*$)|(\n$)/g,"")},numberFormat:function(a,b){return(!b||1>b)&&(b=3),a=String(a).split("."),a[0]=a[0].replace(new RegExp("(\\d)(?=(\\d{"+b+"})+$)","ig"),"$1,"),a.join(".")},isString:function(a){var b=/^([a-z]|[A-Z])+$/;return b.exec(a)},isNumber:function(a){var b=/^\d+\.\d+$/;return b.exec(a)},isInt:function(a){var b=/^\d+$/;return b.exec(a)}},LMath=LString;